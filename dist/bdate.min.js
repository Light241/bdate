angular.module("bdate.datepicker",["bdate.popup"]).directive("bdatepicker",["$filter",function(t){return{restrict:"E",replace:!0,templateUrl:"../dist/templates/default.html",scope:{source:"="},link:function(e){return e.date={viewed:"",model:{}},e.$watch("date.model",function(){var a,r;return a=new Date(e.date.model.year,e.date.model.month-1,e.date.model.day).getTime(),r=t("date")(a,"dd/MM/yyyy"),e.date.viewed=r}),e.popup={isOpen:!1},e.togglePopup=function(){return e.popup.isOpen=!e.popup.isOpen}}}}]),angular.module("bdate",["bdate.datepicker"]),angular.module("bdate.popup",["bdate.utils"]).directive("bdatePopup",["bdateUtils",function(t){return{restrict:"E",replace:!0,templateUrl:"../dist/templates/popup.html",scope:{isHidden:"=",dateModel:"="},link:function(e){var a,r;return r={format:"dd-mm-yyyy",today:{date:1432537266825,year:2015,month:5,day:25,day_of_week:1},years:{2014:{6:{days_total:30,start_day:7},7:{days_total:31,start_day:2},8:{days_total:31,start_day:5},9:{days_total:30,start_day:1},10:{days_total:31,start_day:3}},2015:{1:{days_total:31,start_day:4},2:{days_total:28,start_day:7},3:{days_total:31,start_day:7},4:{days_total:30,start_day:3},5:{days_total:31,start_day:5}}}},a={invalidParams:"Invalid params",errorOnChangeMonthOrYear:"cannot change month or year"},e.popup={hidePopup:function(){},selectDate:function(t){return e.data.setDateModel(t),e.popup.hidePopup()}},e.data={setDateModel:function(t){return t?e.dateModel=t:console.error(a.invalidParams)},source:null,setSource:function(t){return t?e.data.source=t:console.error(a.invalidParams)},format:null,setFormat:function(t){return t?e.data.format=t:console.error(a.invalidParams)},viewedDate:null,setViewedDate:function(r,n){return r&&n?(r=+r,n=+n,e.data.viewedDate={year:{first:Object.keys(e.data.source.years)[0],last:Object.keys(e.data.source.years)[Object.keys(e.data.source.years).length-1],number:r,count:Object.keys(e.data.source.years).length},month:{daysTotal:e.data.source.years[r][n].days_total,startDay:e.data.source.years[r][n].start_day,number:n,name:t.getMonthName(n),count:Object.keys(e.data.source.years[r]).length}},e.data.viewedDate.days=e.data.getDaysArr(e.data.viewedDate.month,e.data.viewedDate.year)):console.error(a.invalidParams)},daysOfWeek:{get:function(){return t.daysOfWeek},getShorts:function(){return t.getDaysOfWeekShorts()}},today:null,setToday:function(t){return t?e.data.today=t:console.error(a.invalidParams)},getDaysArr:function(t,e){var a,r,n,o;for(r=t.daysTotal,o=t.startDay,a=[],n=1;r>=n;)a.push({day:n,month:t.number,year:e.number}),n++;return a},isYearExistInSource:function(t){return t?(t=+t,!!e.data.source.years[t]):console.error(a.invalidParams)},getFirstYearInSource:function(){return Object.keys(e.data.source.years)[0]},isMonthExistInSource:function(t,r){return t&&r?(t=+t,r=+r,e.data.source.years[t]?!!e.data.source.years[t][r]:!1):console.error(a.invalidParams)},isFirstMonthInSource:function(t,a){return t=+t,a=+a,a===Object.keys(e.data.source.years[t])[0]},isLastMonthInSource:function(t,a){return t=+t,a=+a,a===Object.keys(e.data.source.years[t])[Object.keys(e.data.source.years[t]).length-1]},getFirstMonthInSource:function(t){return Object.keys(e.data.source.years[+t])[0]},isCanGoNextMonth:function(t,r,n){var o,s,d,u,i,c;if(r=+r,n=+n,s=e.data.isFirstMonthInSource(r,n),d=e.data.isLastMonthInSource(r,n),o=!1,i=r,u=n,t)if(d){if(o=!0,i=r+1,!e.data.isYearExistInSource(i))return console.error(a.errorOnChangeMonthOrYear),!1;u=e.data.getFirstMonthInSource(i)}else u=n+1;else if(!t)if(s){if(o=!0,i=r-1,!e.data.isYearExistInSource(i))return console.error(a.errorOnChangeMonthOrYear),!1;u=e.data.getLastMonthInSource(i)}else u=n-1;return c={year:i,month:u}},goNextMonth:function(t){var a;return a=e.data.isCanGoNextMonth(t,e.data.viewedDate.year.number,e.data.viewedDate.month.number),a?e.data.setViewedDate(a.year,a.month):void 0},init:function(t){var a;return e.data.setSource(t),e.data.setFormat(t.format),e.data.setToday(t.today),e.data.isMonthExistInSource(t.today.year,t.today.month)?e.data.setViewedDate(t.today.year,t.today.month):(a=e.data.getFirstYearInSource(),e.data.setViewedDate(a,e.data.getFirstMonthInSource(a)))}},function(){return e.data.init(r)}()}}}]),angular.module("bdate.utils",[]).factory("bdateUtils",function(){var t,e,a;return t=[{name:"Понедельник","short":"Пн"},{name:"Вторник","short":"Вт"},{name:"Среда","short":"Ср"},{name:"Четверг","short":"Чт"},{name:"Пятница","short":"Пт"},{name:"Суббота","short":"Сб"},{name:"Воскресенье","short":"Вс"}],a=[{name:"Январь","short":"Янв"},{name:"Февраль","short":"Фев"},{name:"Март","short":"Март"},{name:"Апрель","short":"Май"},{name:"Май","short":"Май"},{name:"Июнь","short":"Июнь"},{name:"Июль","short":"Июль"},{name:"Август","short":"Авг"},{name:"Сентябрь","short":"Сент"},{name:"Октябрь","short":"Окт"},{name:"Ноябрь","short":"Ноя"},{name:"Декабрь","short":"Дек"}],e={daysOfWeek:t,month:a,getDaysOfWeekShorts:function(){var e,a;for(e=0,a=[];e<t.length;)a.push(t[e]["short"]),e++;return a},getMonthName:function(t){return a[t].name},isJanuary:function(t){return 1===t},isDecember:function(t){return 12===t}}});
//# sourceMappingURL=bdate.min.js.map