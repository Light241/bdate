angular.module("bdate",["bdate.popup","bdate.popup.ranged","bdate.templates"]).directive("bdatepicker",["$document","$filter",function(p,e){return{restrict:"E",templateUrl:"bdate.html",scope:{bModel:"=",bSource:"=?",bSettings:"=?",bStartSource:"=?",bEndSource:"=?",bRange:"=?",bRootClasses:"@?",bInputClasses:"@?",bButtonClasses:"@?",bPopupClasses:"@?",bMonthNames:"=?",bDaysNames:"=?",placeholder:"@?",bRefresh:"&?",bStartRefresh:"&?",bEndRefresh:"&?"},controller:["$scope",function(p){var t;return p.state={isDataReady:!1},p.data={date:null},p.isDataReady=!0,t=function(t){var o;return o=new Date(t.year,t.month-1,t.day).getTime(),e("date")(o,p.bSettings.format)},p.$watch("popupResult",function(e,o){return e!==o&&e&&!angular.equals({},e)?p.bModel=t(p.popupResult):void 0},!0)}],link:function(e,t){var o;return e.date={viewed:"",model:{}},o=function(p){var o,n,u,r;return n=e.popup.state.isOpen,o=p.target,r=t,u=r!==o&&!r[0].contains(o),n&&u?e.$apply(function(){return e.popup.hidePopup()}):void 0},e.clear=function(){return e.bModel=null,e.popupResult=null},e.popup={state:{isOpen:!1},togglePopup:function(){return e.isDataReady?e.popup.state.isOpen=!e.popup.state.isOpen:void 0},hidePopup:function(){return e.popup.state.isOpen=!1}},function(){return e.bRange?(e.bStartRefresh(),e.bEndRefresh()):e.bRefresh()}(),e.bRefreshWrap=function(p,t){return e.bRefresh({m:p,y:t})},e.bStartRefreshWrap=function(p,t){return e.bStartRefresh({m:p,y:t})},e.bEndRefreshWrap=function(p,t){return e.bEndRefresh({m:p,y:t})},p.on("click",o)}}}]),angular.module("bdate.popup",["bdate.templates"]).directive("bdatePopup",function(){return{restrict:"E",replace:!0,templateUrl:"popup.html",scope:{popupState:"=",popupSettings:"=",popupSource:"=",popupResult:"=",popupRefresh:"&?"},link:function(p){return p.popup={hidePopup:function(){return p.popupState.isOpen=!1},selectDate:function(e){return p.popupResult=e,p.popup.hidePopup(),p.popup.isDayInSelectedMonth(e)?void 0:p.popup.refreshSelectedData(e.month,e.year)},goPrevYear:function(){var e,t;if(p.popupSource&&p.popupSource.year)return p.popupSource.year.isStart?(console.error("error"),!1):(t=p.popupSource.year.num-1,e=p.popupSource.month.num,p.popup.refreshSelectedData(e,t))},isFirstYear:function(){return p.popupSource&&p.popupSource?p.popupSource.year.isStart:void 0},goPrevMonth:function(){var e,t,o;if(p.popupSource&&p.popupSource.year){if(p.popupSource.month.isStart&&p.popupSource.year.isStart)return console.error("error"),!1;if(e=12,t=p.popupSource.month.num,p.popupSource.month.isStart)o=p.popupSource.year.num-1,t=e;else{if(p.popupSource.month.isStart&&p.popupSource.year.isStart)return console.error("error"),!1;o=p.popupSource.year.num,t=p.popupSource.month.num-1}return p.popup.refreshSelectedData(t,o)}},isFirstMonth:function(){return p.popupSource&&p.popupSource?p.popupSource.month.isStart:void 0},goNextMonth:function(){var e,t,o;if(p.popupSource&&p.popupSource.year){if(p.popupSource.month.isEnd&&p.popupSource.year.isEnd)return console.error("error"),!1;if(e=1,t=p.popupSource.month.num,p.popupSource.month.isEnd)o=p.popupSource.year.num+1,t=e;else{if(p.popupSource.month.isEnd&&p.popupSource.year.isEnd)return console.error("error"),!1;o=p.popupSource.year.num,t=p.popupSource.month.num+1}return p.popup.refreshSelectedData(t,o)}},isLastMonth:function(){return p.popupSource&&p.popupSource?p.popupSource.month.isEnd:void 0},goNextYear:function(){var e,t;if(p.popupSource&&p.popupSource.year)return p.popupSource.year.isEnd?(console.error("error"),!1):(t=p.popupSource.year.num+1,e=p.popupSource.month.num,p.popup.refreshSelectedData(e,t))},isLastYear:function(){return p.popupSource&&p.popupSource?p.popupSource.year.isEnd:void 0},isSelectedDay:function(e){return p.popupResult&&p.popupResult.day?e.day===p.popupResult.day&&e.month===p.popupResult.month&&e.year===p.popupResult.year:void 0},getTodayDateTime:function(){var e;if(p.popupSettings&&p.popupSettings.today)return e=p.popupSettings.today,new Date(e.year,e.month-1,e.day).getTime()},isDayInSelectedMonth:function(e){return e.month===p.popupSource.month.num&&e.year===p.popupSource.year.num},goToYear:function(){var e,t;return t=p.popupSource.year.num,e=p.popupSource.month.num,p.popup.refreshSelectedData(e,t)},refreshSelectedData:function(e,t){return p.popupRefresh({m:e,y:t})}},p.$watch("popupSource",function(){return p.isDataReady=!0},!0)}}}),angular.module("bdate.popup.ranged",["bdate.templates"]).directive("bdateRangePopup",function(){return{restrict:"E",replace:!0,templateUrl:"range-popup.html",scope:{popupState:"=",popupSettings:"=",popupStartSource:"=",popupEndSource:"=",popupResult:"=",popupStartRefresh:"&?",popupEndRefresh:"&?"},link:function(p){var e;return p.data={startDate:"",endDate:""},e=function(e){return e?p.popupStartSource:p.popupEndSource},p.popup={hidePopup:function(){return p.popupState.isOpen=!1},selectDate:function(e,t){return p.popupResult=t,p.popup.hidePopup(),p.popup.isDayInSelectedMonth(t)?void 0:p.popup.refreshSelectedData(e,t.month,t.year)},goPrevYear:function(t){var o,n,u;return n=e(t),n&&n.year?n.year.isStart?(console.error("error"),!1):(u=n.year.num-1,o=n.month.num,p.popup.refreshSelectedData(t,o,u)):void 0},isFirstYear:function(p){var t;return t=e(p),t&&t?t.year.isStart:void 0},goPrevMonth:function(t){var o,n,u,r;if(u=e(t),u&&u.year){if(u.month.isStart&&u.year.isStart)return console.error("error"),!1;if(o=12,n=u.month.num,u.month.isStart)r=u.year.num-1,n=o;else{if(u.month.isStart&&u.year.isStart)return console.error("error"),!1;r=u.year.num,n=u.month.num-1}return p.popup.refreshSelectedData(t,n,r)}},isFirstMonth:function(p){var t;return t=e(p),t&&t?t.month.isStart:void 0},goNextMonth:function(t){var o,n,u,r;if(u=e(t),u&&u.year){if(u.month.isEnd&&u.year.isEnd)return console.error("error"),!1;if(o=1,n=u.month.num,u.month.isEnd)r=u.year.num+1,n=o;else{if(u.month.isEnd&&u.year.isEnd)return console.error("error"),!1;r=u.year.num,n=u.month.num+1}return p.popup.refreshSelectedData(t,n,r)}},isLastMonth:function(p){var t;return t=e(p),t&&t?t.month.isEnd:void 0},goNextYear:function(t){var o,n,u;return n=e(t),n&&n.year?n.year.isEnd?(console.error("error"),!1):(u=n.year.num+1,o=n.month.num,p.popup.refreshSelectedData(t,o,u)):void 0},isLastYear:function(p){var t;return t=e(p),t&&t?t.year.isEnd:void 0},isSelectedDay:function(e){return p.popupResult&&p.popupResult.day?e.day===p.popupResult.day&&e.month===p.popupResult.month&&e.year===p.popupResult.year:void 0},getTodayDateTime:function(){var e;if(p.popupSettings&&p.popupSettings.today)return e=p.popupSettings.today,new Date(e.year,e.month-1,e.day).getTime()},isDayInSelectedMonth:function(p,t){var o;return o=e(p),t.month===o.month.num&&t.year===o.year.num},goToYear:function(t){var o,n,u;return n=e(t),u=n.year.num,o=n.month.num,p.popup.refreshSelectedData(t,o,u)},refreshSelectedData:function(e,t,o){return e?p.popupStartRefresh({m:t,y:o}):p.popupEndRefresh({m:t,y:o})}},p.$watch("popupSource",function(){return p.isDataReady=!0},!0)}}}),angular.module("bdate.templates",[]).run(["$templateCache",function(p){p.put("bdate.html",'<div ng-class="{b_datepicker_in_progress: !isDataReady}" class="b_datepicker_root {{::bRootClasses}}"><input type=text ng-model=bModel placeholder={{placeholder}} ng-click=popup.togglePopup() ng-disabled=!isDataReady readonly=readonly class="b_datepicker_input {{::bInputClasses}}"><button type=button ng-click=clear() class="b_clear_btn {{::bButtonClasses}}">&times;</button><button type=button ng-click=popup.togglePopup() ng-disabled=!isDataReady class="b_datepicker_button b_calendar_btn {{::bButtonClasses}}">&nbsp;</button><bdate-popup popup-settings=bSettings popup-state=popup.state popup-source=bSource popup-result=popupResult popup-refresh="bRefreshWrap(m, y)" ng-if=!bRange class={{::bPopupClasses}}></bdate-popup><bdate-range-popup popup-settings=bSettings popup-state=popup.state popup-start-source=bStartSource popup-end-source=bEndSource popup-result=popupResult popup-start-refresh="bStartRefreshWrap(m, y)" popup-end-refresh="bEndRefreshWrap(m, y)" ng-if=bRange class={{::bPopupClasses}}></bdate-range-popup></div>'),p.put("popup.html",'<div ng-show=popupState.isOpen class=b_popup><div class=b_popup_controls><div class=b_btn_prev_container><button type=button ng-click=popup.goPrevYear() ng-disabled=popup.isFirstYear() class="b_popup_btn b_btn_prev">&#9664; &#9664;</button><button type=button ng-click=popup.goPrevMonth() ng-disabled="popup.isFirstMonth() &amp;&amp; popup.isFirstYear()" class="b_popup_btn b_btn_prev">&#9664;</button></div><div ng-bind=popupSource.month.name class=b_popup_month></div>&nbsp;<select ng-model=popupSource.year.num ng-options="year for year in popupSource.years" ng-init="year = popupSource.year.num" ng-change=popup.goToYear() class=b_popup_year></select><div class=b_btn_next_container><button type=button ng-click=popup.goNextMonth() ng-disabled="popup.isLastMonth() &amp;&amp; popup.isLastYear()" class="b_popup_btn b_btn_next">&#9654;</button><button type=button ng-click=popup.goNextYear() ng-disabled=popup.isLastYear() class="b_popup_btn b_btn_next">&#9654; &#9654;</button></div></div><table class=b_popup_days><tr><td ng-repeat="dayOfWeek in ::popupSettings.week" class=b_popup_day_of_week><span ng-bind=::dayOfWeek></span></td></tr></table><table class=b_popup_weeks><tr class=b_popup_week><td ng-repeat="date in popupSource.dates track by $index" ng-class="{b_popup_today_day_container: date.isToday}" class=b_popup_day><button type=button ng-bind=date.day ng-click=popup.selectDate(date) ng-disabled=date.isDisabled ng-class="{b_popup_day_in_selected_month: popup.isDayInSelectedMonth(date), b_popup_today_day: date.isToday, b_popup_selected_day: popup.isSelectedDay(date)}" class=b_popup_day_btn></button></td></tr></table><div ng-show=popupSettings.today class=b_popup_today><button type=button ng-bind="popup.getTodayDateTime() | date:popupSettings.format" ng-click=popup.selectDate(popupSettings.today) class=b_popup_today_btn></button></div></div>'),p.put("range-popup.html",'<div ng-show=popupState.isOpen class=b_range_popup_back><div class="b_popup b_range_popup b_range_popup_start"><div class=b_popup_controls><div class=b_btn_prev_container><button type=button ng-click=popup.goPrevYear(true) ng-disabled=popup.isFirstYear(true) class="b_popup_btn b_btn_prev">&#9664; &#9664;</button><button type=button ng-click=popup.goPrevMonth(true) ng-disabled="popup.isFirstMonth(true) &amp;&amp; popup.isFirstYear(true)" class="b_popup_btn b_btn_prev">&#9664;</button></div><div ng-bind=popupStartSource.month.name class=b_popup_month></div>&nbsp;<select ng-model=popupStartSource.year.num ng-options="year for year in popupStartSource.years" ng-init="year = popupStartSource.year.num" ng-change=popup.goToYear(true) class=b_popup_year></select><div class=b_btn_next_container><button type=button ng-click=popup.goNextMonth(true) ng-disabled="popup.isLastMonth(true) &amp;&amp; popup.isLastYear(true)" class="b_popup_btn b_btn_next">&#9654;</button><button type=button ng-click=popup.goNextYear(true) ng-disabled=popup.isLastYear(true) class="b_popup_btn b_btn_next">&#9654; &#9654;</button></div></div><table class=b_popup_days><tr><td ng-repeat="dayOfWeek in ::popupSettings.week" class=b_popup_day_of_week><span ng-bind=::dayOfWeek></span></td></tr></table><table class=b_popup_weeks><tr class=b_popup_week><td ng-repeat="date in popupStartSource.dates track by $index" ng-class="{b_popup_today_day_container: date.isToday}" class=b_popup_day><button type=button ng-bind=date.day ng-click="popup.selectDate(true, date)" ng-disabled=date.isDisabled ng-class="{b_popup_day_in_selected_month: popup.isDayInSelectedMonth(true, date), b_popup_today_day: date.isToday, b_popup_selected_day: popup.isSelectedDay(date)}" class=b_popup_day_btn></button></td></tr></table></div><div class="b_popup b_range_popup b_range_popup_end"><div class=b_popup_controls><div class=b_btn_prev_container><button type=button ng-click=popup.goPrevYear(false) ng-disabled=popup.isFirstYear(false) class="b_popup_btn b_btn_prev">&#9664; &#9664;</button><button type=button ng-click=popup.goPrevMonth(false) ng-disabled="popup.isFirstMonth(false) &amp;&amp; popup.isFirstYear(false)" class="b_popup_btn b_btn_prev">&#9664;</button></div><div ng-bind=popupEndSource.month.name class=b_popup_month></div>&nbsp;<select ng-model=popupEndSource.year.num ng-options="year for year in popupEndSource.years" ng-init="year = popupEndSource.year.num" ng-change=popup.goToYear(false) class=b_popup_year></select><div class=b_btn_next_container><button type=button ng-click=popup.goNextMonth(false) ng-disabled="popup.isLastMonth(false) &amp;&amp; popup.isLastYear(false)" class="b_popup_btn b_btn_next">&#9654;</button><button type=button ng-click=popup.goNextYear(false) ng-disabled=popup.isLastYear(false) class="b_popup_btn b_btn_next">&#9654; &#9654;</button></div></div><table class=b_popup_days><tr><td ng-repeat="dayOfWeek in ::popupSettings.week" class=b_popup_day_of_week><span ng-bind=::dayOfWeek></span></td></tr></table><table class=b_popup_weeks><tr class=b_popup_week><td ng-repeat="date in popupEndSource.dates track by $index" ng-class="{b_popup_today_day_container: date.isToday}" class=b_popup_day><button type=button ng-bind=date.day ng-click=popup.selectDate(date) ng-disabled=date.isDisabled ng-class="{b_popup_day_in_selected_month: popup.isDayInSelectedMonth(false, date), b_popup_today_day: date.isToday, b_popup_selected_day: popup.isSelectedDay(date)}" class=b_popup_day_btn></button></td></tr></table></div><div ng-show=popupSettings.today class=b_popup_today><button type=button ng-bind="popup.getTodayDateTime() | date:popupSettings.format" class=b_popup_today_btn></button></div><button type=button ng-click=popup.selectRangedDate()>Ok</button></div>')}]);
//# sourceMappingURL=bdate.min.js.map