angular.module("bdate",["bdate.popup","bdate.templates"]).directive("bdatepicker",["$document","$filter",function(e,p){return{restrict:"E",templateUrl:"bdate.html",scope:{bModel:"=",bSource:"=",bRange:"=?",bRootClasses:"@?",bInputClasses:"@?",bButtonClasses:"@?",bPopupClasses:"@?",bMonthNames:"=?",bDaysNames:"=?",placeholder:"@?",bRefresh:"&?"},controller:["$scope",function(e){var t;return e.state={isDataReady:!1},e.data={date:null},e.$watch("bSource",function(){return e.isDataReady=!0},!0),t=function(t){var o;return o=new Date(t.year,t.month-1,t.day).getTime(),p("date")(o,e.bSource.format)},e.$watch("popupResult",function(p,o){return p!==o&&p&&!angular.equals({},p)?e.bModel=t(e.popupResult):void 0},!0)}],link:function(p,t){var o;return p.date={viewed:"",model:{}},o=function(e){var o,u,r,n;return u=p.popup.state.isOpen,o=e.target,n=t,r=n!==o&&!n[0].contains(o),u&&r?p.$apply(function(){return p.popup.hidePopup()}):void 0},p.clear=function(){return p.bModel=null,p.popupResult=null},p.popup={state:{isOpen:!1},togglePopup:function(){return p.isDataReady?p.popup.state.isOpen=!p.popup.state.isOpen:void 0},hidePopup:function(){return p.popup.state.isOpen=!1}},function(){return p.bRefresh()}(),p.bRefreshTest=function(e,t){return p.bRefresh({m:e,y:t})},e.on("click",o)}}}]),angular.module("bdate.popup",["bdate.templates"]).directive("bdatePopup",function(){return{restrict:"E",replace:!0,templateUrl:"popup.html",scope:{popupState:"=",popupSource:"=",popupResult:"=",popupRefresh:"&?"},link:function(e){return e.popup={hidePopup:function(){return e.popupState.isOpen=!1},selectDate:function(p){return e.popupResult=p,e.popup.hidePopup(),e.popup.isDayInSelectedMonth(p)?void 0:e.popup.refreshSelectedData(p.month,p.year)},goPrevYear:function(){var p,t;if(e.popupSource.selected&&e.popupSource.selected.year)return e.popupSource.selected.year.isStart?(console.error("error"),!1):(t=e.popupSource.selected.year.num-1,p=e.popupSource.selected.month.num,e.popup.refreshSelectedData(p,t))},isFirstYear:function(){return e.popupSource&&e.popupSource.selected?e.popupSource.selected.year.isStart:void 0},goPrevMonth:function(){var p,t,o;if(e.popupSource.selected&&e.popupSource.selected.year){if(e.popupSource.selected.month.isStart&&e.popupSource.selected.year.isStart)return console.error("error"),!1;if(p=12,t=e.popupSource.selected.month.num,e.popupSource.selected.month.isStart)o=e.popupSource.selected.year.num-1,t=p;else{if(e.popupSource.selected.month.isStart&&e.popupSource.selected.year.isStart)return console.error("error"),!1;o=e.popupSource.selected.year.num,t=e.popupSource.selected.month.num-1}return e.popup.refreshSelectedData(t,o)}},isFirstMonth:function(){return e.popupSource&&e.popupSource.selected?e.popupSource.selected.month.isStart:void 0},goNextMonth:function(){var p,t,o;if(e.popupSource.selected&&e.popupSource.selected.year){if(e.popupSource.selected.month.isEnd&&e.popupSource.selected.year.isEnd)return console.error("error"),!1;if(p=1,t=e.popupSource.selected.month.num,e.popupSource.selected.month.isEnd)o=e.popupSource.selected.year.num+1,t=p;else{if(e.popupSource.selected.month.isEnd&&e.popupSource.selected.year.isEnd)return console.error("error"),!1;o=e.popupSource.selected.year.num,t=e.popupSource.selected.month.num+1}return e.popup.refreshSelectedData(t,o)}},isLastMonth:function(){return e.popupSource&&e.popupSource.selected?e.popupSource.selected.month.isEnd:void 0},goNextYear:function(){var p,t;if(e.popupSource.selected&&e.popupSource.selected.year)return e.popupSource.selected.year.isEnd?(console.error("error"),!1):(t=e.popupSource.selected.year.num+1,p=e.popupSource.selected.month.num,e.popup.refreshSelectedData(p,t))},isLastYear:function(){return e.popupSource&&e.popupSource.selected?e.popupSource.selected.year.isEnd:void 0},isSelectedDay:function(p){return e.popupResult&&e.popupResult.day?p.day===e.popupResult.day&&p.month===e.popupResult.month&&p.year===e.popupResult.year:void 0},getTodayDateTime:function(){var p;if(e.popupSource&&e.popupSource.today)return p=e.popupSource.today,new Date(p.year,p.month-1,p.day).getTime()},isDayInSelectedMonth:function(p){return p.month===e.popupSource.selected.month.num&&p.year===e.popupSource.selected.year.num},goToYear:function(){var p,t;return t=e.popupSource.selected.year.num,p=e.popupSource.selected.month.num,e.popup.refreshSelectedData(p,t)},refreshSelectedData:function(p,t){return e.popupRefresh({m:p,y:t})}},e.$watch("popupSource",function(){return e.isDataReady=!0},!0)}}}),angular.module("bdate.popup",["bdate.templates"]).directive("bdateRangePopup",function(){return{restrict:"E",replace:!0,templateUrl:"range-popup.html",scope:{popupState:"=",popupSource:"=",popupResult:"=",popupRefresh:"&?"},link:function(e){return e.popup={hidePopup:function(){return e.popupState.isOpen=!1},selectDate:function(p){return e.popupResult=p,e.popup.hidePopup(),e.popup.isDayInSelectedMonth(p)?void 0:e.popup.refreshSelectedData(p.month,p.year)},goPrevYear:function(){var p,t;if(e.popupSource.selected&&e.popupSource.selected.year)return e.popupSource.selected.year.isStart?(console.error("error"),!1):(t=e.popupSource.selected.year.num-1,p=e.popupSource.selected.month.num,e.popup.refreshSelectedData(p,t))},isFirstYear:function(){return e.popupSource&&e.popupSource.selected?e.popupSource.selected.year.isStart:void 0},goPrevMonth:function(){var p,t,o;if(e.popupSource.selected&&e.popupSource.selected.year){if(e.popupSource.selected.month.isStart&&e.popupSource.selected.year.isStart)return console.error("error"),!1;if(p=12,t=e.popupSource.selected.month.num,e.popupSource.selected.month.isStart)o=e.popupSource.selected.year.num-1,t=p;else{if(e.popupSource.selected.month.isStart&&e.popupSource.selected.year.isStart)return console.error("error"),!1;o=e.popupSource.selected.year.num,t=e.popupSource.selected.month.num-1}return e.popup.refreshSelectedData(t,o)}},isFirstMonth:function(){return e.popupSource&&e.popupSource.selected?e.popupSource.selected.month.isStart:void 0},goNextMonth:function(){var p,t,o;if(e.popupSource.selected&&e.popupSource.selected.year){if(e.popupSource.selected.month.isEnd&&e.popupSource.selected.year.isEnd)return console.error("error"),!1;if(p=1,t=e.popupSource.selected.month.num,e.popupSource.selected.month.isEnd)o=e.popupSource.selected.year.num+1,t=p;else{if(e.popupSource.selected.month.isEnd&&e.popupSource.selected.year.isEnd)return console.error("error"),!1;o=e.popupSource.selected.year.num,t=e.popupSource.selected.month.num+1}return e.popup.refreshSelectedData(t,o)}},isLastMonth:function(){return e.popupSource&&e.popupSource.selected?e.popupSource.selected.month.isEnd:void 0},goNextYear:function(){var p,t;if(e.popupSource.selected&&e.popupSource.selected.year)return e.popupSource.selected.year.isEnd?(console.error("error"),!1):(t=e.popupSource.selected.year.num+1,p=e.popupSource.selected.month.num,e.popup.refreshSelectedData(p,t))},isLastYear:function(){return e.popupSource&&e.popupSource.selected?e.popupSource.selected.year.isEnd:void 0},isSelectedDay:function(p){return e.popupResult&&e.popupResult.day?p.day===e.popupResult.day&&p.month===e.popupResult.month&&p.year===e.popupResult.year:void 0},getTodayDateTime:function(){var p;if(e.popupSource&&e.popupSource.today)return p=e.popupSource.today,new Date(p.year,p.month-1,p.day).getTime()},isDayInSelectedMonth:function(p){return p.month===e.popupSource.selected.month.num&&p.year===e.popupSource.selected.year.num},goToYear:function(){var p,t;return t=e.popupSource.selected.year.num,p=e.popupSource.selected.month.num,e.popup.refreshSelectedData(p,t)},refreshSelectedData:function(p,t){return e.popupRefresh({m:p,y:t})}},e.$watch("popupSource",function(){return e.isDataReady=!0},!0)}}}),angular.module("bdate.templates",[]).run(["$templateCache",function(e){e.put("bdate.html",'<div ng-class="{b_datepicker_in_progress: !isDataReady}" class="b_datepicker_root {{::bRootClasses}}"><input type=text ng-model=bModel placeholder={{placeholder}} ng-click=popup.togglePopup() ng-disabled=!isDataReady readonly=readonly class="b_datepicker_input {{::bInputClasses}}"><button type=button ng-click=clear() class="b_clear_btn {{::bButtonClasses}}">&times;</button><button type=button ng-click=popup.togglePopup() ng-disabled=!isDataReady class="b_datepicker_button b_calendar_btn {{::bButtonClasses}}">&nbsp;</button><bdate-popup popup-state=popup.state popup-source=bSource popup-result=popupResult popup-refresh="bRefreshTest(m, y)" ng-if=!bRange class={{::bPopupClasses}}></bdate-popup><bdate-range-popup popup-state=popup.state popup-source=bSource popup-result=popupResult popup-refresh="bRefreshTest(m, y)" ng-if=bRange class={{::bPopupClasses}}></bdate-range-popup></div>'),e.put("popup.html",'<div ng-show=popupState.isOpen class=b_popup><div class=b_popup_controls><div class=b_btn_prev_container><button type=button ng-click=popup.goPrevYear() ng-disabled=popup.isFirstYear() class="b_popup_btn b_btn_prev">&#9664; &#9664;</button><button type=button ng-click=popup.goPrevMonth() ng-disabled="popup.isFirstMonth() &amp;&amp; popup.isFirstYear()" class="b_popup_btn b_btn_prev">&#9664;</button></div><div ng-bind=popupSource.selected.month.name class=b_popup_month></div>&nbsp;<select ng-model=popupSource.selected.year.num ng-options="year for year in popupSource.years" ng-init="year = popupSource.selected.year.num" ng-change=popup.goToYear() class=b_popup_year></select><div class=b_btn_next_container><button type=button ng-click=popup.goNextMonth() ng-disabled="popup.isLastMonth() &amp;&amp; popup.isLastYear()" class="b_popup_btn b_btn_next">&#9654;</button><button type=button ng-click=popup.goNextYear() ng-disabled=popup.isLastYear() class="b_popup_btn b_btn_next">&#9654; &#9654;</button></div></div><table class=b_popup_days><tr><td ng-repeat="dayOfWeek in ::popupSource.week" class=b_popup_day_of_week><span ng-bind=::dayOfWeek></span></td></tr></table><table class=b_popup_weeks><tr class=b_popup_week><td ng-repeat="date in popupSource.selected.dates track by $index" ng-class="{b_popup_today_day_container: date.isToday}" class=b_popup_day><button type=button ng-bind=date.day ng-click=popup.selectDate(date) ng-disabled=date.isDisabled ng-class="{b_popup_day_in_selected_month: popup.isDayInSelectedMonth(date), b_popup_today_day: date.isToday, b_popup_selected_day: popup.isSelectedDay(date)}" class=b_popup_day_btn></button></td></tr></table><div ng-show=popupSource.today class=b_popup_today><button type=button ng-bind="popup.getTodayDateTime() | date:popupSource.format" ng-click=popup.selectDate(popupSource.today) class=b_popup_today_btn></button></div></div>'),e.put("range-popup.html",'<div ng-show=popupState.isOpen class=b_range_popup><div class=b_popup><div class=b_popup_controls><div class=b_btn_prev_container><button type=button ng-click=popup.goPrevYear() ng-disabled=popup.isFirstYear() class="b_popup_btn b_btn_prev">&#9664; &#9664;</button><button type=button ng-click=popup.goPrevMonth() ng-disabled="popup.isFirstMonth() &amp;&amp; popup.isFirstYear()" class="b_popup_btn b_btn_prev">&#9664;</button></div><div ng-bind=popupSource.selected.month.name class=b_popup_month></div>&nbsp;<select ng-model=popupSource.selected.year.num ng-options="year for year in popupSource.years" ng-init="year = popupSource.selected.year.num" ng-change=popup.goToYear() class=b_popup_year></select><div class=b_btn_next_container><button type=button ng-click=popup.goNextMonth() ng-disabled="popup.isLastMonth() &amp;&amp; popup.isLastYear()" class="b_popup_btn b_btn_next">&#9654;</button><button type=button ng-click=popup.goNextYear() ng-disabled=popup.isLastYear() class="b_popup_btn b_btn_next">&#9654; &#9654;</button></div></div><table class=b_popup_days><tr><td ng-repeat="dayOfWeek in ::popupSource.week" class=b_popup_day_of_week><span ng-bind=::dayOfWeek></span></td></tr></table><table class=b_popup_weeks><tr class=b_popup_week><td ng-repeat="date in popupSource.selected.dates track by $index" ng-class="{b_popup_today_day_container: date.isToday}" class=b_popup_day><button type=button ng-bind=date.day ng-click=popup.selectDate(date) ng-disabled=date.isDisabled ng-class="{b_popup_day_in_selected_month: popup.isDayInSelectedMonth(date), b_popup_today_day: date.isToday, b_popup_selected_day: popup.isSelectedDay(date)}" class=b_popup_day_btn></button></td></tr></table><div ng-show=popupSource.today class=b_popup_today><button type=button ng-bind="popup.getTodayDateTime() | date:popupSource.format" ng-click=popup.selectDate(popupSource.today) class=b_popup_today_btn></button></div></div><div class=b_popup><div class=b_popup_controls><div class=b_btn_prev_container><button type=button ng-click=popup.goPrevYear() ng-disabled=popup.isFirstYear() class="b_popup_btn b_btn_prev">&#9664; &#9664;</button><button type=button ng-click=popup.goPrevMonth() ng-disabled="popup.isFirstMonth() &amp;&amp; popup.isFirstYear()" class="b_popup_btn b_btn_prev">&#9664;</button></div><div ng-bind=popupSource.selected.month.name class=b_popup_month></div>&nbsp;<select ng-model=popupSource.selected.year.num ng-options="year for year in popupSource.years" ng-init="year = popupSource.selected.year.num" ng-change=popup.goToYear() class=b_popup_year></select><div class=b_btn_next_container><button type=button ng-click=popup.goNextMonth() ng-disabled="popup.isLastMonth() &amp;&amp; popup.isLastYear()" class="b_popup_btn b_btn_next">&#9654;</button><button type=button ng-click=popup.goNextYear() ng-disabled=popup.isLastYear() class="b_popup_btn b_btn_next">&#9654; &#9654;</button></div></div><table class=b_popup_days><tr><td ng-repeat="dayOfWeek in ::popupSource.week" class=b_popup_day_of_week><span ng-bind=::dayOfWeek></span></td></tr></table><table class=b_popup_weeks><tr class=b_popup_week><td ng-repeat="date in popupSource.selected.dates track by $index" ng-class="{b_popup_today_day_container: date.isToday}" class=b_popup_day><button type=button ng-bind=date.day ng-click=popup.selectDate(date) ng-disabled=date.isDisabled ng-class="{b_popup_day_in_selected_month: popup.isDayInSelectedMonth(date), b_popup_today_day: date.isToday, b_popup_selected_day: popup.isSelectedDay(date)}" class=b_popup_day_btn></button></td></tr></table><div ng-show=popupSource.today class=b_popup_today><button type=button ng-bind="popup.getTodayDateTime() | date:popupSource.format" ng-click=popup.selectDate(popupSource.today) class=b_popup_today_btn></button></div></div></div>')}]);
//# sourceMappingURL=bdate.min.js.map