{"version":3,"sources":["bdate.js"],"names":["angular","module","directive","restrict","replace","templateUrl","scope","source","link","elem","popup","isOpen","togglePopup","constant","OK","CREATED","ACCEPTED","BAD_REQUEST","UNAUTHORIZED","FORBIDDEN","NOT_FOUND","TOO_MANY_REQUESTS","INTERNAL_SERVER_ERROR","BAD_GATEWAY","second","minute","hour","day","bdateUtils","isHidden","init","messages","format","today","date","year","month","day_of_week","years",2015,"days_total","start_day","invalidParams","data","dateModel","setDateModel","console","error","setSource","dateSource","setFormat","viewedDate","setViewedDate","monthNumber","first","Object","keys","last","length","number","count","daysTotal","startDay","name","getMonthName","daysOfWeek","get","getShorts","getDaysOfWeekShorts","setToday","getDaysArr","monthObj","arr","daysCount","daysInWeek","i","j","Array","apply","map","Number","call","shift","unshift","Math","floor","push","goNextMonth","isForward","factory","exports","short","result"],"mappings":"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","file":"bdate.min.js","sourcesContent":["angular.module('bdate.datepicker', ['bdate.popup']).directive('bdatepicker', function() {\n  return {\n    restrict: 'E',\n    replace: true,\n    templateUrl: '../dist/templates/default.html',\n    scope: {\n      source: '='\n    },\n    link: function(scope, elem) {\n      scope.popup = {\n        isOpen: false\n      };\n      return scope.togglePopup = function() {\n        return scope.popup.isOpen = !scope.popup.isOpen;\n      };\n    }\n  };\n});\n\nangular.module('bdate', ['bdate.datepicker']).constant('HTTP_STATUS', {\n  OK: 200,\n  CREATED: 201,\n  ACCEPTED: 202,\n  BAD_REQUEST: 400,\n  UNAUTHORIZED: 401,\n  FORBIDDEN: 403,\n  NOT_FOUND: 404,\n  TOO_MANY_REQUESTS: 429,\n  INTERNAL_SERVER_ERROR: 500,\n  BAD_GATEWAY: 502\n}).constant('PERIOD', {\n  second: 1000,\n  minute: 60000,\n  hour: 3600000,\n  day: 86400000\n});\n\nangular.module('bdate.popup', ['bdate.utils']).directive('bdatePopup', ['bdateUtils', function(bdateUtils) {\n  return {\n    restrict: 'E',\n    replace: true,\n    templateUrl: '../dist/templates/popup.html',\n    scope: {\n      isHidden: '='\n    },\n    link: function(scope) {\n      var init, messages, source;\n      source = {\n        format: 'dd-mm-yyyy',\n        today: {\n          date: 1432537266825,\n          year: 2015,\n          month: 4,\n          day: 25,\n          day_of_week: 1\n        },\n        years: {\n          2015: [\n            {\n              days_total: 31,\n              start_day: 4\n            }, {\n              days_total: 28,\n              start_day: 7\n            }, {\n              days_total: 31,\n              start_day: 7\n            }, {\n              days_total: 30,\n              start_day: 3\n            }, {\n              days_total: 31,\n              start_day: 5\n            }\n          ]\n        }\n      };\n      messages = {\n        invalidParams: 'Invalid params'\n      };\n      scope.data = {\n        dateModel: null,\n        setDateModel: function(dateModel) {\n          if (!dateModel) {\n            return console.error(messages.invalidParams);\n          }\n          return scope.data.dateModel = dateModel;\n        },\n        source: null,\n        setSource: function(dateSource) {\n          if (!dateSource) {\n            return console.error(messages.invalidParams);\n          }\n          return scope.data.source = dateSource;\n        },\n        format: null,\n        setFormat: function(format) {\n          if (!format) {\n            return console.error(messages.invalidParams);\n          }\n          return scope.data.format = format;\n        },\n        viewedDate: null,\n        setViewedDate: function(year, monthNumber) {\n          if (!year || !monthNumber) {\n            return console.error(messages.invalidParams);\n          }\n          return scope.data.viewedDate = {\n            year: {\n              first: Object.keys(scope.data.source.years)[0],\n              last: Object.keys(scope.data.source.years)[Object.keys(scope.data.source.years).length - 1],\n              number: year,\n              count: Object.keys(scope.data.source.years).length\n            },\n            month: {\n              daysTotal: scope.data.source.years[year][monthNumber].days_total,\n              startDay: scope.data.source.years[year][monthNumber].start_day,\n              number: monthNumber,\n              name: bdateUtils.getMonthName(monthNumber),\n              count: scope.data.source.years[year].length\n            }\n          };\n        },\n        daysOfWeek: {\n          get: function() {\n            return bdateUtils.daysOfWeek;\n          },\n          getShorts: function() {\n            return bdateUtils.getDaysOfWeekShorts();\n          }\n        },\n        today: null,\n        setToday: function(today) {\n          if (!today) {\n            return console.error(messages.invalidParams);\n          }\n          return scope.data.today = today;\n        },\n        getDaysArr: function(monthObj) {\n          var arr, daysCount, daysInWeek, i, j, startDay;\n          daysCount = monthObj.daysTotal;\n          startDay = monthObj.startDay;\n          arr = Array.apply(null, {\n            length: daysCount + 1\n          }).map(Number.call, Number);\n          arr.shift();\n          i = 1;\n          while (i <= startDay - 1) {\n            arr.unshift('');\n            i++;\n          }\n          daysInWeek = 7;\n          if ((arr.length / daysInWeek) === Math.floor(arr.length / daysInWeek)) {\n            return arr;\n          }\n          j = daysCount;\n          while (j <= daysCount + startDay - 1) {\n            arr.push('');\n            j++;\n          }\n          return arr;\n        },\n        goNextMonth: function(isForward) {\n          if (isForward) {\n            scope.data.viewedDate.month.number = scope.data.viewedDate.month.number + 1;\n          } else {\n            scope.data.viewedDate.month.number = scope.data.viewedDate.month.number - 1;\n          }\n          return scope.data.setViewedDate(scope.data.source.today.year, scope.data.viewedDate.month.number);\n        },\n        init: function(dateSource) {\n          scope.data.setSource(dateSource);\n          scope.data.setFormat(dateSource.format);\n          scope.data.setViewedDate(dateSource.today.year, dateSource.today.month);\n          return scope.data.setToday(dateSource.today);\n        }\n      };\n      return (init = function() {\n        return scope.data.init(source);\n      })();\n    }\n  };\n}]);\n\nangular.module('bdate.utils', []).factory('bdateUtils', function() {\n  var daysOfWeek, exports, month;\n  daysOfWeek = [\n    {\n      name: 'Понедельник',\n      short: 'Пн'\n    }, {\n      name: 'Вторник',\n      short: 'Вт'\n    }, {\n      name: 'Среда',\n      short: 'Ср'\n    }, {\n      name: 'Четверг',\n      short: 'Чт'\n    }, {\n      name: 'Пятница',\n      short: 'Пт'\n    }, {\n      name: 'Суббота',\n      short: 'Сб'\n    }, {\n      name: 'Воскресенье',\n      short: 'Вс'\n    }\n  ];\n  month = [\n    {\n      name: 'Январь',\n      short: 'Янв'\n    }, {\n      name: 'Февраль',\n      short: 'Фев'\n    }, {\n      name: 'Март',\n      short: 'Март'\n    }, {\n      name: 'Апрель',\n      short: 'Май'\n    }, {\n      name: 'Май',\n      short: 'Май'\n    }, {\n      name: 'Июнь',\n      short: 'Июнь'\n    }, {\n      name: 'Июль',\n      short: 'Июль'\n    }, {\n      name: 'Август',\n      short: 'Авг'\n    }, {\n      name: 'Сентябрь',\n      short: 'Сент'\n    }, {\n      name: 'Октябрь',\n      short: 'Окт'\n    }, {\n      name: 'Ноябрь',\n      short: 'Ноя'\n    }, {\n      name: 'Декабрь',\n      short: 'Дек'\n    }\n  ];\n  return exports = {\n    daysOfWeek: daysOfWeek,\n    month: month,\n    getDaysOfWeekShorts: function() {\n      var i, result;\n      i = 0;\n      result = [];\n      while (i < daysOfWeek.length) {\n        result.push(daysOfWeek[i].short);\n        i++;\n      }\n      return result;\n    },\n    getMonthName: function(number) {\n      return month[number].name;\n    }\n  };\n});\n"],"sourceRoot":"/source/"}