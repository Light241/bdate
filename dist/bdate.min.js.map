{"version":3,"sources":["bdate.js"],"names":["angular","module","directive","$filter","bDataFactory","restrict","replace","templateUrl","scope","source","bRootId","bInputId","bPopupId","controller","makeDataQuery","link","date","viewed","model","$watch","dateTime","formattedDate","equals","Date","year","month","day","getTime","popup","state","isOpen","togglePopup","factory","exports","sourceData","format","today","day_of_week","years",2013,1,"days_total","start_day",2014,5,6,7,8,9,10,2015,2,3,4,2016,2017,"data","setData","constant","invalidParams","errorOnChangeMonthOrYear","bDateUtils","MESSAGES","popupState","dateModel","hidePopup","selectDate","setDateModel","console","error","setFormat","viewedDate","setViewedDate","yearNum","monthNum","first","Object","keys","last","length","number","count","daysTotal","startDay","name","getMonthName","days","getDaysArr","daysOfWeek","get","getShorts","getDaysOfWeekShorts","setToday","arr","daysCount","daysInWeek","expectedWeeksCount","i","j","k","push","unshift","Math","ceil","floor","goNextMonth","isForward","nextObj","sourceCheckers","getNextAvailableMonth","goNextYear","init","dateSource","firstYear","isMonthExist","getFirstYear","getFirstMonth","short","result","isFirstMonth","isLastMonth","getLastMonth","isChangeYear","nextMonth","nextYearNum","isYearExist","isFirstYear","isLastYear","getLastYear","getNextAvailableYear","isMonthExistInYear"],"mappings":"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","file":"bdate.min.js","sourcesContent":["angular.module('bdate.datepicker', ['bdate.popup', 'bdate.data']).directive('bdatepicker', ['$filter', 'bDataFactory', function($filter, bDataFactory) {\n  return {\n    restrict: 'E',\n    replace: true,\n    templateUrl: 'bdate/dist/templates/default.html',\n    scope: {\n      source: '=',\n      bRootId: '@?',\n      bInputId: '@?',\n      bPopupId: '@?'\n    },\n    controller: function() {\n      return bDataFactory.makeDataQuery();\n    },\n    link: function(scope) {\n      scope.date = {\n        viewed: '',\n        model: {}\n      };\n      scope.$watch('date.model', function() {\n        var dateTime, formattedDate;\n        if (angular.equals({}, scope.date.model)) {\n          return;\n        }\n        dateTime = new Date(scope.date.model.year, scope.date.model.month - 1, scope.date.model.day).getTime();\n        formattedDate = $filter('date')(dateTime, \"dd/MM/yyyy\");\n        return scope.date.viewed = formattedDate;\n      });\n      scope.popup = {\n        state: {\n          isOpen: false\n        }\n      };\n      return scope.togglePopup = function() {\n        return scope.popup.state.isOpen = !scope.popup.state.isOpen;\n      };\n    }\n  };\n}]);\n\nangular.module('bdate.data', []).factory('bDataFactory', function() {\n  var exports, sourceData;\n  sourceData = {\n    format: 'dd-mm-yyyy',\n    today: {\n      date: 1432537266825,\n      year: 2015,\n      month: 5,\n      day: 25,\n      day_of_week: 1\n    },\n    years: {\n      2013: {\n        1: {\n          days_total: 31,\n          start_day: 2\n        }\n      },\n      2014: {\n        5: {\n          days_total: 31,\n          start_day: 4\n        },\n        6: {\n          days_total: 30,\n          start_day: 7\n        },\n        7: {\n          days_total: 31,\n          start_day: 2\n        },\n        8: {\n          days_total: 31,\n          start_day: 5\n        },\n        9: {\n          days_total: 30,\n          start_day: 1\n        },\n        10: {\n          days_total: 31,\n          start_day: 3\n        }\n      },\n      2015: {\n        2: {\n          days_total: 28,\n          start_day: 7\n        },\n        3: {\n          days_total: 31,\n          start_day: 7\n        },\n        4: {\n          days_total: 30,\n          start_day: 3\n        },\n        5: {\n          days_total: 31,\n          start_day: 5\n        }\n      },\n      2016: {\n        1: {\n          days_total: 31,\n          start_day: 5\n        }\n      },\n      2017: {\n        1: {\n          days_total: 31,\n          start_day: 7\n        },\n        2: {\n          days_total: 28,\n          start_day: 3\n        }\n      }\n    }\n  };\n  return exports = {\n    data: null,\n    setData: function(source) {\n      return exports.data = source;\n    },\n    makeDataQuery: function() {\n      return exports.setData(sourceData);\n    }\n  };\n});\n\nangular.module('bdate', ['bdate.datepicker']).constant('MESSAGES', {\n  invalidParams: 'Invalid params',\n  errorOnChangeMonthOrYear: 'cannot change month or year'\n});\n\nangular.module('bdate.popup', ['bdate.utils', 'bdate.data']).directive('bdatePopup', ['bDateUtils', 'bDataFactory', 'MESSAGES', function(bDateUtils, bDataFactory, MESSAGES) {\n  return {\n    restrict: 'E',\n    replace: true,\n    templateUrl: 'bdate/dist/templates/popup.html',\n    scope: {\n      popupState: '=',\n      dateModel: '='\n    },\n    link: function(scope) {\n      scope.popup = {\n        hidePopup: function() {\n          return scope.popupState.isOpen = false;\n        },\n        selectDate: function(date) {\n          scope.data.setDateModel(date);\n          return scope.popup.hidePopup();\n        }\n      };\n      scope.data = {\n        setDateModel: function(dateModel) {\n          if (!dateModel) {\n            return console.error(MESSAGES.invalidParams);\n          }\n          return scope.dateModel = dateModel;\n        },\n        format: null,\n        setFormat: function(format) {\n          if (!format) {\n            return console.error(MESSAGES.invalidParams);\n          }\n          return scope.data.format = format;\n        },\n        viewedDate: null,\n        setViewedDate: function(yearNum, monthNum) {\n          if (!yearNum || !monthNum) {\n            return console.error(MESSAGES.invalidParams);\n          }\n          yearNum = +yearNum;\n          monthNum = +monthNum;\n          scope.data.viewedDate = {\n            year: {\n              first: Object.keys(bDataFactory.data.years)[0],\n              last: Object.keys(bDataFactory.data.years)[Object.keys(bDataFactory.data.years).length - 1],\n              number: yearNum,\n              count: Object.keys(bDataFactory.data.years).length\n            },\n            month: {\n              daysTotal: bDataFactory.data.years[yearNum][monthNum].days_total,\n              startDay: bDataFactory.data.years[yearNum][monthNum].start_day,\n              number: monthNum,\n              name: bDateUtils.getMonthName(monthNum),\n              count: Object.keys(bDataFactory.data.years[yearNum]).length\n            }\n          };\n          return scope.data.viewedDate.days = scope.data.getDaysArr(scope.data.viewedDate.month, scope.data.viewedDate.year);\n        },\n        daysOfWeek: {\n          get: function() {\n            return bDateUtils.daysOfWeek;\n          },\n          getShorts: function() {\n            return bDateUtils.getDaysOfWeekShorts();\n          }\n        },\n        today: null,\n        setToday: function(today) {\n          if (!today) {\n            return console.error(MESSAGES.invalidParams);\n          }\n          return scope.data.today = today;\n        },\n        getDaysArr: function(month, year) {\n          var arr, daysCount, daysInWeek, expectedWeeksCount, i, j, k, startDay;\n          daysCount = month.daysTotal;\n          startDay = month.startDay;\n          arr = [];\n          k = 1;\n          while (k <= daysCount) {\n            arr.push({\n              day: k,\n              month: month.number,\n              year: year.number\n            });\n            k++;\n          }\n          i = 1;\n          while (i <= startDay - 1) {\n            arr.unshift('');\n            i++;\n          }\n          daysInWeek = 7;\n          expectedWeeksCount = Math.ceil(arr.length / daysInWeek);\n          if ((arr.length / daysInWeek) === Math.floor(arr.length / daysInWeek)) {\n            return arr;\n          }\n          j = arr.length;\n          while (j < (expectedWeeksCount * daysInWeek)) {\n            arr.push('');\n            j++;\n          }\n          return arr;\n        },\n        goNextMonth: function(isForward) {\n          var nextObj;\n          nextObj = bDateUtils.sourceCheckers.month.getNextAvailableMonth(isForward, scope.data.viewedDate.year.number, scope.data.viewedDate.month.number);\n          if (nextObj) {\n            return scope.data.setViewedDate(nextObj.year, nextObj.month);\n          }\n        },\n        goNextYear: function(isForward) {},\n        init: function(dateSource) {\n          var firstYear;\n          scope.data.setFormat(dateSource.format);\n          scope.data.setToday(dateSource.today);\n          if (bDateUtils.sourceCheckers.month.isMonthExist(dateSource.today.year, dateSource.today.month)) {\n            return scope.data.setViewedDate(dateSource.today.year, dateSource.today.month);\n          } else {\n            firstYear = bDateUtils.sourceCheckers.year.getFirstYear();\n            return scope.data.setViewedDate(firstYear, bDateUtils.sourceCheckers.month.getFirstMonth(firstYear));\n          }\n        }\n      };\n      return (function() {\n        return scope.data.init(bDataFactory.data);\n      })();\n    }\n  };\n}]);\n\nangular.module('bdate.utils', ['bdate.data']).factory('bDateUtils', ['MESSAGES', 'bDataFactory', function(MESSAGES, bDataFactory) {\n  var daysOfWeek, exports, month;\n  daysOfWeek = [\n    {\n      name: 'Понедельник',\n      short: 'Пн'\n    }, {\n      name: 'Вторник',\n      short: 'Вт'\n    }, {\n      name: 'Среда',\n      short: 'Ср'\n    }, {\n      name: 'Четверг',\n      short: 'Чт'\n    }, {\n      name: 'Пятница',\n      short: 'Пт'\n    }, {\n      name: 'Суббота',\n      short: 'Сб'\n    }, {\n      name: 'Воскресенье',\n      short: 'Вс'\n    }\n  ];\n  month = [\n    {\n      name: 'Январь',\n      short: 'Янв'\n    }, {\n      name: 'Февраль',\n      short: 'Фев'\n    }, {\n      name: 'Март',\n      short: 'Март'\n    }, {\n      name: 'Апрель',\n      short: 'Май'\n    }, {\n      name: 'Май',\n      short: 'Май'\n    }, {\n      name: 'Июнь',\n      short: 'Июнь'\n    }, {\n      name: 'Июль',\n      short: 'Июль'\n    }, {\n      name: 'Август',\n      short: 'Авг'\n    }, {\n      name: 'Сентябрь',\n      short: 'Сент'\n    }, {\n      name: 'Октябрь',\n      short: 'Окт'\n    }, {\n      name: 'Ноябрь',\n      short: 'Ноя'\n    }, {\n      name: 'Декабрь',\n      short: 'Дек'\n    }\n  ];\n  return exports = {\n    daysOfWeek: daysOfWeek,\n    month: month,\n    getDaysOfWeekShorts: function() {\n      var i, result;\n      i = 0;\n      result = [];\n      while (i < daysOfWeek.length) {\n        result.push(daysOfWeek[i].short);\n        i++;\n      }\n      return result;\n    },\n    getMonthName: function(number) {\n      return month[number].name;\n    },\n    sourceCheckers: {\n      month: {\n        isMonthExist: function(yearNum, monthNum) {\n          if (!yearNum || !monthNum) {\n            return console.error(MESSAGES.invalidParams);\n          }\n          yearNum = +yearNum;\n          monthNum = +monthNum;\n          if (!bDataFactory.data.years[yearNum]) {\n            return false;\n          }\n          return !!bDataFactory.data.years[yearNum][monthNum];\n        },\n        isFirstMonth: function(yearNum, monthNum) {\n          yearNum = +yearNum;\n          monthNum = +monthNum;\n          return monthNum === +Object.keys(bDataFactory.data.years[yearNum])[0];\n        },\n        getFirstMonth: function(yearNum) {\n          yearNum = +yearNum;\n          return +Object.keys(bDataFactory.data.years[yearNum])[0];\n        },\n        isLastMonth: function(yearNum, monthNum) {\n          yearNum = +yearNum;\n          monthNum = +monthNum;\n          return monthNum === +Object.keys(bDataFactory.data.years[yearNum])[Object.keys(bDataFactory.data.years[yearNum]).length - 1];\n        },\n        getLastMonth: function(yearNum) {\n          yearNum = +yearNum;\n          return +Object.keys(bDataFactory.data.years[yearNum])[Object.keys(bDataFactory.data.years[yearNum]).length - 1];\n        },\n        getNextAvailableMonth: function(isForward, yearNum, monthNum) {\n          var isChangeYear, isFirstMonth, isLastMonth, nextMonth, nextYearNum, result;\n          yearNum = +yearNum;\n          monthNum = +monthNum;\n          isFirstMonth = exports.sourceCheckers.month.isFirstMonth(yearNum, monthNum);\n          isLastMonth = exports.sourceCheckers.month.isLastMonth(yearNum, monthNum);\n          isChangeYear = false;\n          nextYearNum = yearNum;\n          nextMonth = monthNum;\n          if (isForward) {\n            if (!isLastMonth) {\n              nextMonth = monthNum + 1;\n            } else {\n              isChangeYear = true;\n              nextYearNum = yearNum + 1;\n              if (scope.data.isYearExist(nextYearNum)) {\n                nextMonth = exports.sourceCheckers.month.getFirstMonth(nextYearNum);\n              } else {\n                console.error(MESSAGES.errorOnChangeMonthOrYear);\n                return false;\n              }\n            }\n          } else if (!isForward) {\n            if (!isFirstMonth) {\n              nextMonth = monthNum - 1;\n            } else {\n              isChangeYear = true;\n              nextYearNum = yearNum - 1;\n              if (exports.sourceCheckers.year.isYearExist(nextYearNum)) {\n                nextMonth = exports.sourceCheckers.month.getLastMonth(nextYearNum);\n              } else {\n                console.error(MESSAGES.errorOnChangeMonthOrYear);\n                return false;\n              }\n            }\n          }\n          return result = {\n            year: nextYearNum,\n            month: nextMonth\n          };\n        }\n      },\n      year: {\n        isYearExist: function(yearNum) {\n          if (!yearNum) {\n            return console.error(MESSAGES.invalidParams);\n          }\n          yearNum = +yearNum;\n          return !!bDataFactory.data.years[yearNum];\n        },\n        isFirstYear: function(yearNum) {\n          yearNum = +yearNum;\n          return yearNum === +Object.keys(bDataFactory.data.years)[0];\n        },\n        getFirstYear: function() {\n          return +Object.keys(bDataFactory.data.years)[0];\n        },\n        isLastYear: function(yearNum) {\n          yearNum = +yearNum;\n          return yearNum === +Object.keys(bDataFactory.data.years)[Object.keys(bDataFactory.data.years).length - 1];\n        },\n        getLastYear: function() {\n          return +Object.keys(bDataFactory.data.years)[Object.keys(bDataFactory.data.years).length - 1];\n        },\n        getNextAvailableYear: function(isForward, yearNum, monthNum) {\n          var isFirstYear, isLastYear, isMonthExistInYear, nextMonth, nextYearNum, result;\n          yearNum = +yearNum;\n          monthNum = +monthNum;\n          isFirstYear = exports.sourceCheckers.year.isFirstYear(yearNum);\n          isLastYear = exports.sourceCheckers.year.isLastYear(yearNum);\n          isMonthExistInYear = exports.sourceCheckers.month.isMonthExist(yearNum(monthNum));\n          nextYearNum = yearNum;\n          nextMonth = monthNum;\n          if (isForward) {\n            if (!isLastYear) {\n              nextMonth = monthNum + 1;\n            } else {\n              nextYearNum = yearNum + 1;\n              if (exports.sourceCheckers.year.isYearExist(nextYearNum)) {\n                nextMonth = exports.sourceCheckers.month.getFirstMonth(nextYearNum);\n              } else {\n                console.error(MESSAGES.errorOnChangeMonthOrYear);\n                return false;\n              }\n            }\n          } else if (!isForward) {\n            if (!isFirstYear) {\n              nextMonth = monthNum - 1;\n            } else {\n              nextYearNum = yearNum - 1;\n              if (exports.sourceCheckers.year.isYearExist(nextYearNum)) {\n                nextMonth = exports.sourceCheckers.month.getLastMonth(nextYearNum);\n              } else {\n                console.error(MESSAGES.errorOnChangeMonthOrYear);\n                return false;\n              }\n            }\n          }\n          return result = {\n            year: nextYearNum,\n            month: nextMonth\n          };\n        }\n      }\n    }\n  };\n}]);\n"],"sourceRoot":"/source/"}