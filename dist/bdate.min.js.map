{"version":3,"sources":["bdate.js"],"names":["angular","module","directive","$document","$filter","restrict","templateUrl","scope","bModel","bSource","bSettings","bStartSource","bEndSource","bRange","bOnSelect","bRootClasses","bInputClasses","bButtonClasses","bPopupClasses","bMonthNames","bDaysNames","placeholder","bRefresh","bStartRefresh","bEndRefresh","link","elem","getFormattedDate","getFormattedDateRange","getOutputDate","parseDateRangeStringToDMY","parseDateStringToDMY","parseOutputDate","pauseAndUpdateResult","processClick","state","isSourceReady","data","date","dmy","datetime","Date","year","month","day","getTime","format","dmyRange","datetimeEnd","datetimeStart","endDate","startDate","start","end","range_delimiter","dateStr","dateStrRegex","e","elements","formatRegex","i","k","keys","parsedObj","vals","length","RegExp","toLowerCase","match","indexOf","dateEndStr","dateStartStr","delimiterLength","formatLength","result","substr","val","isHandler","watchers","popup","handler","stop","callback","$watch","newVal","oldVal","watchPopupResult","equals","watchBModel","onChangeCb","watchSource","isEndSourceReady","isStartSourceReady","event","clickedElem","isOpen","isOutsideClick","popupElem","target","contains","$apply","hidePopup","clear","togglePopup","bOnSelectWrap","bOnSelectRangeWrap","bRefreshWrap","m","y","bStartRefreshWrap","bEndRefreshWrap","on","replace","popupState","popupSettings","popupSource","popupResult","popupRefresh","popupClick","watchResult","refreshSelectedData","selectDate","isDayInSelectedMonth","goPrevYear","isStart","console","error","num","isFirstYear","goPrevMonth","december","isFirstMonth","goNextMonth","january","isEnd","isLastMonth","goNextYear","isLastYear","isSelectedDay","getTodayDateTime","today","goToYear","popupStartSource","popupEndSource","popupStartRefresh","popupEndRefresh","getSource","setDataResult","startResult","endResult","isStartPopup","selectRangedDate","run","$templateCache","put"],"mappings":"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","file":"bdate.min.js","sourcesContent":["angular.module('bdate', ['bdate.popup', 'bdate.popup.ranged', 'bdate.templates']).directive('bdatepicker', ['$document', '$filter', function($document, $filter) {\n  return {\n    restrict: 'E',\n    templateUrl: 'bdate.html',\n    scope: {\n      bModel: '=',\n      bSource: '=?',\n      bSettings: '=?',\n      bStartSource: '=?',\n      bEndSource: '=?',\n      bRange: '=?',\n      bOnSelect: \"&?\",\n      bRootClasses: '@?',\n      bInputClasses: '@?',\n      bButtonClasses: '@?',\n      bPopupClasses: '@?',\n      bMonthNames: '=?',\n      bDaysNames: '=?',\n      placeholder: '@?',\n      bRefresh: \"&?\",\n      bStartRefresh: \"&?\",\n      bEndRefresh: \"&?\"\n    },\n    link: function(scope, elem) {\n      var getFormattedDate, getFormattedDateRange, getOutputDate, parseDateRangeStringToDMY, parseDateStringToDMY, parseOutputDate, pauseAndUpdateResult, processClick;\n      scope.state = {\n        isSourceReady: false\n      };\n      scope.data = {\n        date: null\n      };\n      getFormattedDate = function(dmy) {\n        var datetime;\n        datetime = new Date(dmy.year, dmy.month - 1, dmy.day).getTime();\n        return $filter('date')(datetime, scope.bSettings.format);\n      };\n      getFormattedDateRange = function(dmyRange) {\n        var datetimeEnd, datetimeStart, endDate, startDate;\n        datetimeStart = new Date(dmyRange.start.year, dmyRange.start.month - 1, dmyRange.start.day).getTime();\n        datetimeEnd = new Date(dmyRange.end.year, dmyRange.end.month - 1, dmyRange.end.day).getTime();\n        startDate = $filter('date')(datetimeStart, scope.bSettings.format);\n        endDate = $filter('date')(datetimeEnd, scope.bSettings.format);\n        return startDate + scope.bSettings.range_delimiter + endDate;\n      };\n      getOutputDate = function(date) {\n        if (!scope.bRange) {\n          return getFormattedDate(date);\n        } else {\n          return getFormattedDateRange(date);\n        }\n      };\n      parseDateStringToDMY = function(dateStr) {\n        var dateStrRegex, e, elements, format, formatRegex, i, k, keys, parsedObj, vals;\n        if (dateStr.length !== scope.bSettings.format.length) {\n          return;\n        }\n        elements = {\n          day: 'd',\n          month: 'm',\n          year: 'y'\n        };\n        dateStrRegex = new RegExp('\\\\d+', 'g');\n        format = scope.bSettings.format;\n        format = format.toLowerCase();\n        formatRegex = new RegExp('\\\\w+', 'g');\n        keys = format.match(formatRegex);\n        vals = dateStr.match(dateStrRegex);\n        parsedObj = {};\n        i = 0;\n        while (i < keys.length) {\n          parsedObj[keys[i]] = vals[i];\n          i++;\n        }\n        for (k in parsedObj) {\n          for (e in elements) {\n            if (k.indexOf(elements[e]) >= 0) {\n              elements[e] = +parsedObj[k];\n            }\n          }\n        }\n        return elements;\n      };\n      parseDateRangeStringToDMY = function(dateStr) {\n        var dateEndStr, dateStartStr, delimiterLength, formatLength, result;\n        delimiterLength = scope.bSettings.range_delimiter.length;\n        formatLength = scope.bSettings.format.length;\n        dateStartStr = dateStr.substr(0, formatLength);\n        dateEndStr = dateStr.substr(formatLength + delimiterLength);\n        result = {\n          start: parseDateStringToDMY(dateStartStr),\n          end: parseDateStringToDMY(dateEndStr)\n        };\n        return result;\n      };\n      parseOutputDate = function(dateStr) {\n        var result;\n        result = null;\n        if (!scope.bRange) {\n          result = parseDateStringToDMY(dateStr);\n        } else {\n          result = parseDateRangeStringToDMY(dateStr);\n        }\n        return result;\n      };\n      pauseAndUpdateResult = function(val) {\n        var isHandler;\n        isHandler = !!scope.watchers.popup.result.handler;\n        if (isHandler) {\n          scope.watchers.popup.result.stop();\n        }\n        scope.popup.result = parseOutputDate(val);\n        if (isHandler) {\n          return scope.watchers.popup.result.start();\n        }\n      };\n      scope.watchers = {\n        popup: {\n          result: {\n            handler: null,\n            callback: null,\n            start: function(callback) {\n              if (scope.watchers.popup.result.handler) {\n                return;\n              }\n              if (callback != null) {\n                scope.watchers.popup.result.callback = callback;\n              }\n              scope.watchers.popup.result.handler = scope.$watch('popup.result', function(newVal, oldVal) {\n                if (scope.watchers.popup.result.callback) {\n                  return scope.watchers.popup.result.callback(newVal, oldVal);\n                }\n              }, true);\n              return scope.watchers.popup.result.handler;\n            },\n            stop: function() {\n              scope.watchers.popup.result.handler();\n              return scope.watchers.popup.result.handler = null;\n            }\n          }\n        },\n        watchPopupResult: function(callback) {\n          return scope.watchers.popup.result.start(function(newVal, oldVal) {\n            if (newVal === oldVal) {\n              return;\n            }\n            if (!newVal) {\n              return;\n            }\n            if (angular.equals({}, newVal)) {\n              return;\n            }\n            scope.watchers.bModel.stop();\n            scope.bModel = getOutputDate(scope.popup.result);\n            scope.watchers.bModel.start();\n            if (callback) {\n              return callback(newVal, oldVal);\n            }\n          });\n        },\n        bModel: {\n          handler: null,\n          callback: null,\n          start: function(callback) {\n            if (callback != null) {\n              scope.watchers.bModel.callback = callback;\n            }\n            if (scope.watchers.bModel.handler) {\n              return;\n            }\n            scope.watchers.bModel.handler = scope.$watch('bModel', function(newVal, oldVal) {\n              if (scope.watchers.bModel.callback) {\n                return scope.watchers.bModel.callback(newVal, oldVal);\n              }\n            }, true);\n            return scope.watchers.bModel.handler;\n          },\n          stop: function() {\n            scope.watchers.bModel.handler();\n            return scope.watchers.bModel.handler = null;\n          }\n        },\n        watchBModel: function(onChangeCb, callback) {\n          return scope.watchers.bModel.start(function(newVal, oldVal) {\n            if (newVal === oldVal) {\n              if (newVal && !scope.popup.result) {\n                pauseAndUpdateResult(newVal);\n              }\n              if (callback) {\n                return callback();\n              }\n              return;\n            }\n            if (!newVal) {\n              if (callback) {\n                return callback();\n              }\n              return;\n            }\n            if (!scope.popup.result || newVal !== getOutputDate(scope.popup.result)) {\n              pauseAndUpdateResult(newVal);\n            }\n            if (onChangeCb) {\n              return onChangeCb(newVal, oldVal);\n            }\n          });\n        },\n        bSource: {\n          handler: null,\n          callback: null,\n          start: function(callback) {\n            if (callback != null) {\n              scope.watchers.bSource.callback = callback;\n            }\n            if (scope.watchers.bSource.handler) {\n              return;\n            }\n            scope.watchers.bSource.handler = scope.$watch('bSource', function(newVal, oldVal) {\n              if (scope.watchers.bSource.callback) {\n                return scope.watchers.bSource.callback(newVal, oldVal);\n              }\n            });\n            return scope.watchers.bSource.handler;\n          },\n          stop: function() {\n            scope.watchers.bSource.handler();\n            return scope.watchers.bSource.handler = null;\n          }\n        },\n        bStartSource: {\n          handler: null,\n          callback: null,\n          start: function(callback) {\n            if (callback != null) {\n              scope.watchers.bStartSource.callback = callback;\n            }\n            if (scope.watchers.bStartSource.handler) {\n              return;\n            }\n            scope.watchers.bStartSource.handler = scope.$watch('bStartSource', function(newVal, oldVal) {\n              if (scope.watchers.bStartSource.callback) {\n                return scope.watchers.bStartSource.callback(newVal, oldVal);\n              }\n            });\n            return scope.watchers.bStartSource.handler;\n          },\n          stop: function() {\n            return scope.watchers.bStartSource.handler();\n          }\n        },\n        bEndSource: {\n          handler: null,\n          callback: null,\n          start: function(callback) {\n            if (callback != null) {\n              scope.watchers.bEndSource.callback = callback;\n            }\n            if (scope.watchers.bEndSource.handler) {\n              return;\n            }\n            scope.watchers.bEndSource.handler = scope.$watch('bEndSource', function(newVal, oldVal) {\n              if (scope.watchers.bEndSource.callback) {\n                return scope.watchers.bEndSource.callback(newVal, oldVal);\n              }\n            });\n            return scope.watchers.bEndSource.handler;\n          },\n          stop: function() {\n            scope.watchers.bEndSource.handler();\n            return scope.watchers.bEndSource.handler = null;\n          }\n        },\n        watchSource: function(callback) {\n          var isEndSourceReady, isStartSourceReady;\n          if (!scope.bRange) {\n            return scope.watchers.bSource.start(function(val) {\n              if (!val) {\n                return;\n              }\n              scope.isSourceReady = true;\n              scope.watchers.bSource.stop();\n              if (callback) {\n                return callback(val);\n              }\n            });\n          } else {\n            isStartSourceReady = false;\n            isEndSourceReady = false;\n            scope.watchers.bStartSource.start(function(val) {\n              if (!val) {\n                return;\n              }\n              isStartSourceReady = true;\n              if (isStartSourceReady && isEndSourceReady) {\n                scope.isSourceReady = true;\n                scope.watchers.bStartSource.stop();\n                scope.watchers.bEndSource.stop();\n                if (callback) {\n                  return callback(val);\n                }\n              }\n            });\n            return scope.watchers.bEndSource.start(function(val) {\n              if (!val) {\n                return;\n              }\n              isEndSourceReady = true;\n              if (isStartSourceReady && isEndSourceReady) {\n                scope.isSourceReady = true;\n                scope.watchers.bStartSource.stop();\n                scope.watchers.bEndSource.stop();\n                if (callback) {\n                  return callback(val);\n                }\n              }\n            });\n          }\n        }\n      };\n      processClick = function(event) {\n        var clickedElem, isOpen, isOutsideClick, popupElem;\n        isOpen = scope.popup.state.isOpen;\n        clickedElem = event.target;\n        popupElem = elem;\n        isOutsideClick = (popupElem !== clickedElem) && !(popupElem[0].contains(clickedElem));\n        if (isOpen && isOutsideClick) {\n          return scope.$apply(function() {\n            return scope.popup.hidePopup();\n          });\n        }\n      };\n      scope.clear = function() {\n        scope.bModel = null;\n        return scope.popup.result = null;\n      };\n      scope.popup = {\n        result: null,\n        state: {\n          isOpen: false\n        },\n        togglePopup: function() {\n          if (!scope.isSourceReady) {\n            return;\n          }\n          return scope.popup.state.isOpen = !scope.popup.state.isOpen;\n        },\n        hidePopup: function() {\n          return scope.popup.state.isOpen = false;\n        }\n      };\n      (function() {\n        scope.watchers.watchSource((function() {\n          return scope.watchers.watchBModel(null, function() {\n            return scope.watchers.watchPopupResult();\n          });\n        }));\n        if (!scope.bRange) {\n          return scope.bRefresh();\n        } else {\n          scope.bStartRefresh();\n          return scope.bEndRefresh();\n        }\n      })();\n      scope.bOnSelectWrap = function(date) {\n        return scope.bOnSelect({\n          date: date\n        });\n      };\n      scope.bOnSelectRangeWrap = function(start, end) {\n        return scope.bOnSelect({\n          start: start,\n          end: end\n        });\n      };\n      scope.bRefreshWrap = function(m, y) {\n        return scope.bRefresh({\n          m: m,\n          y: y\n        });\n      };\n      scope.bStartRefreshWrap = function(m, y) {\n        return scope.bStartRefresh({\n          m: m,\n          y: y\n        });\n      };\n      scope.bEndRefreshWrap = function(m, y) {\n        return scope.bEndRefresh({\n          m: m,\n          y: y\n        });\n      };\n      return $document.on('click', processClick);\n    }\n  };\n}]);\n\nangular.module('bdate.popup', ['bdate.templates']).directive('bdatePopup', function() {\n  return {\n    restrict: 'E',\n    replace: true,\n    templateUrl: 'popup.html',\n    scope: {\n      popupState: '=',\n      popupSettings: '=',\n      popupSource: '=',\n      popupResult: '=',\n      popupRefresh: \"&?\",\n      popupClick: \"&?\"\n    },\n    link: function(scope) {\n      scope.watchers = {\n        result: {\n          handler: null,\n          callback: null,\n          start: function(callback) {\n            if (scope.watchers.result.handler) {\n              return;\n            }\n            if (callback != null) {\n              scope.watchers.result.callback = callback;\n            }\n            return scope.watchers.result.handler = scope.$watch('popupResult', function(newVal, oldVal) {\n              if (scope.watchers.result.callback) {\n                return scope.watchers.result.callback(newVal, oldVal);\n              }\n            }, true);\n          },\n          stop: function() {\n            scope.watchers.result.handler();\n            return scope.watchers.result.handler = null;\n          },\n          watchResult: function(callback) {\n            return scope.watchers.result.start(function(newVal, oldVal) {\n              if (newVal === oldVal) {\n                return;\n              }\n              if (!newVal) {\n                return;\n              }\n              if (angular.equals({}, newVal)) {\n                return;\n              }\n              scope.popup.refreshSelectedData(newVal.month, newVal.year);\n              if (callback) {\n                return callback(newVal, oldVal);\n              }\n            });\n          }\n        }\n      };\n      scope.popup = {\n        hidePopup: function() {\n          return scope.popupState.isOpen = false;\n        },\n        selectDate: function(date) {\n          scope.popupResult = date;\n          if (scope.popupClick) {\n            scope.popupClick({\n              date: date\n            });\n          }\n          scope.popup.hidePopup();\n          if (!scope.popup.isDayInSelectedMonth(date)) {\n            return scope.popup.refreshSelectedData(date.month, date.year);\n          }\n        },\n        goPrevYear: function() {\n          var month, year;\n          if (!scope.popupSource || !scope.popupSource.year) {\n            return;\n          }\n          if (scope.popupSource.year.isStart) {\n            console.error('error');\n            return false;\n          }\n          year = scope.popupSource.year.num - 1;\n          month = scope.popupSource.month.num;\n          return scope.popup.refreshSelectedData(month, year);\n        },\n        isFirstYear: function() {\n          if (!scope.popupSource || !scope.popupSource) {\n            return;\n          }\n          return scope.popupSource.year.isStart;\n        },\n        goPrevMonth: function() {\n          var december, month, year;\n          if (!scope.popupSource || !scope.popupSource.year) {\n            return;\n          }\n          if (scope.popupSource.month.isStart && scope.popupSource.year.isStart) {\n            console.error('error');\n            return false;\n          }\n          december = 12;\n          month = scope.popupSource.month.num;\n          if (scope.popupSource.month.isStart) {\n            year = scope.popupSource.year.num - 1;\n            month = december;\n          } else if (scope.popupSource.month.isStart && scope.popupSource.year.isStart) {\n            console.error('error');\n            return false;\n          } else {\n            year = scope.popupSource.year.num;\n            month = scope.popupSource.month.num - 1;\n          }\n          return scope.popup.refreshSelectedData(month, year);\n        },\n        isFirstMonth: function() {\n          if (!scope.popupSource || !scope.popupSource.month || angular.equals(scope.popupSource, {})) {\n            return;\n          }\n          return scope.popupSource.month.isStart;\n        },\n        goNextMonth: function() {\n          var january, month, year;\n          if (!scope.popupSource || !scope.popupSource.year || angular.equals(scope.popupSource, {})) {\n            return;\n          }\n          if (scope.popupSource.month.isEnd && scope.popupSource.year.isEnd) {\n            console.error('error');\n            return false;\n          }\n          january = 1;\n          month = scope.popupSource.month.num;\n          if (scope.popupSource.month.isEnd) {\n            year = scope.popupSource.year.num + 1;\n            month = january;\n          } else if (scope.popupSource.month.isEnd && scope.popupSource.year.isEnd) {\n            console.error('error');\n            return false;\n          } else {\n            year = scope.popupSource.year.num;\n            month = scope.popupSource.month.num + 1;\n          }\n          return scope.popup.refreshSelectedData(month, year);\n        },\n        isLastMonth: function() {\n          if (!scope.popupSource || !scope.popupSource || angular.equals(scope.popupSource, {})) {\n            return;\n          }\n          return scope.popupSource.month.isEnd;\n        },\n        goNextYear: function() {\n          var month, year;\n          if (!scope.popupSource || !scope.popupSource.year || angular.equals(scope.popupSource, {})) {\n            return;\n          }\n          if (scope.popupSource.year.isEnd) {\n            console.error('error');\n            return false;\n          }\n          year = scope.popupSource.year.num + 1;\n          month = scope.popupSource.month.num;\n          return scope.popup.refreshSelectedData(month, year);\n        },\n        isLastYear: function() {\n          if (!scope.popupSource || !scope.popupSource || angular.equals(scope.popupSource, {})) {\n            return;\n          }\n          return scope.popupSource.year.isEnd;\n        },\n        isSelectedDay: function(date) {\n          if (!scope.popupResult || !scope.popupResult.day || angular.equals(scope.popupSource, {})) {\n            return;\n          }\n          return (date.day === scope.popupResult.day) && (date.month === scope.popupResult.month) && (date.year === scope.popupResult.year);\n        },\n        getTodayDateTime: function() {\n          var today;\n          if (!scope.popupSettings || !scope.popupSettings.today || angular.equals(scope.popupSettings, {})) {\n            return;\n          }\n          today = scope.popupSettings.today;\n          return new Date(today.year, today.month - 1, today.day).getTime();\n        },\n        isDayInSelectedMonth: function(date) {\n          return (date.month === scope.popupSource.month.num) && (date.year === scope.popupSource.year.num);\n        },\n        goToYear: function() {\n          var month, year;\n          year = scope.popupSource.year.num;\n          month = scope.popupSource.month.num;\n          return scope.popup.refreshSelectedData(month, year);\n        },\n        refreshSelectedData: function(month, year) {\n          return scope.popupRefresh({\n            m: month,\n            y: year\n          });\n        }\n      };\n      return (function() {\n        return scope.watchers.result.watchResult();\n      })();\n    }\n  };\n});\n\nangular.module('bdate.popup.ranged', ['bdate.templates']).directive('bdateRangePopup', function() {\n  return {\n    restrict: 'E',\n    replace: true,\n    templateUrl: 'range-popup.html',\n    scope: {\n      popupState: '=',\n      popupSettings: '=',\n      popupStartSource: '=',\n      popupEndSource: '=',\n      popupResult: '=',\n      popupClick: \"&?\",\n      popupStartRefresh: \"&?\",\n      popupEndRefresh: \"&?\"\n    },\n    link: function(scope) {\n      var getSource, setDataResult;\n      scope.data = {\n        startResult: null,\n        endResult: null\n      };\n      scope.watchers = {\n        result: {\n          handler: null,\n          callback: null,\n          start: function(callback) {\n            if (callback != null) {\n              scope.watchers.result.callback = callback;\n            }\n            if (scope.watchers.result.handler) {\n              return;\n            }\n            return scope.watchers.result.handler = scope.$watch('popupResult', function(newVal, oldVal) {\n              if (scope.watchers.result.callback) {\n                return scope.watchers.result.callback(newVal, oldVal);\n              }\n            }, true);\n          },\n          stop: function() {\n            scope.watchers.result.handler();\n            return scope.watchers.result.handler = null;\n          },\n          watchPopupResult: function(callback) {\n            return scope.watchers.result.start(function(newVal, oldVal) {\n              if (newVal === oldVal) {\n                return;\n              }\n              if (!newVal) {\n                return;\n              }\n              if (angular.equals({}, newVal)) {\n                return;\n              }\n              scope.popup.refreshSelectedData(true, newVal.start.month, newVal.start.year);\n              scope.popup.refreshSelectedData(false, newVal.end.month, newVal.end.year);\n              if (callback) {\n                return callback(newVal, oldVal);\n              }\n            });\n          }\n        }\n      };\n      getSource = function(isStartPopup) {\n        if (isStartPopup) {\n          return scope.popupStartSource;\n        } else {\n          return scope.popupEndSource;\n        }\n      };\n      setDataResult = function(isStartPopup, date) {\n        if (isStartPopup) {\n          return scope.data.startResult = date;\n        } else {\n          return scope.data.endResult = date;\n        }\n      };\n      scope.popup = {\n        hidePopup: function() {\n          return scope.popupState.isOpen = false;\n        },\n        selectDate: function(isStartPopup, date) {\n          setDataResult(isStartPopup, date);\n          if (!scope.popup.isDayInSelectedMonth(isStartPopup, date)) {\n            return scope.popup.refreshSelectedData(isStartPopup, date.month, date.year);\n          }\n        },\n        goPrevYear: function(isStartPopup) {\n          var month, popupSource, year;\n          popupSource = getSource(isStartPopup);\n          if (!popupSource || !popupSource.year) {\n            return;\n          }\n          if (popupSource.year.isStart) {\n            console.error('error');\n            return false;\n          }\n          year = popupSource.year.num - 1;\n          month = popupSource.month.num;\n          return scope.popup.refreshSelectedData(isStartPopup, month, year);\n        },\n        isFirstYear: function(isStartPopup) {\n          var popupSource;\n          popupSource = getSource(isStartPopup);\n          if (!popupSource || !popupSource) {\n            return;\n          }\n          return popupSource.year.isStart;\n        },\n        goPrevMonth: function(isStartPopup) {\n          var december, month, popupSource, year;\n          popupSource = getSource(isStartPopup);\n          if (!popupSource || !popupSource.year) {\n            return;\n          }\n          if (popupSource.month.isStart && popupSource.year.isStart) {\n            console.error('error');\n            return false;\n          }\n          december = 12;\n          month = popupSource.month.num;\n          if (popupSource.month.isStart) {\n            year = popupSource.year.num - 1;\n            month = december;\n          } else if (popupSource.month.isStart && popupSource.year.isStart) {\n            console.error('error');\n            return false;\n          } else {\n            year = popupSource.year.num;\n            month = popupSource.month.num - 1;\n          }\n          return scope.popup.refreshSelectedData(isStartPopup, month, year);\n        },\n        isFirstMonth: function(isStartPopup) {\n          var popupSource;\n          popupSource = getSource(isStartPopup);\n          if (!popupSource || !popupSource) {\n            return;\n          }\n          return popupSource.month.isStart;\n        },\n        goNextMonth: function(isStartPopup) {\n          var january, month, popupSource, year;\n          popupSource = getSource(isStartPopup);\n          if (!popupSource || !popupSource.year) {\n            return;\n          }\n          if (popupSource.month.isEnd && popupSource.year.isEnd) {\n            console.error('error');\n            return false;\n          }\n          january = 1;\n          month = popupSource.month.num;\n          if (popupSource.month.isEnd) {\n            year = popupSource.year.num + 1;\n            month = january;\n          } else if (popupSource.month.isEnd && popupSource.year.isEnd) {\n            console.error('error');\n            return false;\n          } else {\n            year = popupSource.year.num;\n            month = popupSource.month.num + 1;\n          }\n          return scope.popup.refreshSelectedData(isStartPopup, month, year);\n        },\n        isLastMonth: function(isStartPopup) {\n          var popupSource;\n          popupSource = getSource(isStartPopup);\n          if (!popupSource || !popupSource) {\n            return;\n          }\n          return popupSource.month.isEnd;\n        },\n        goNextYear: function(isStartPopup) {\n          var month, popupSource, year;\n          popupSource = getSource(isStartPopup);\n          if (!popupSource || !popupSource.year) {\n            return;\n          }\n          if (popupSource.year.isEnd) {\n            console.error('error');\n            return false;\n          }\n          year = popupSource.year.num + 1;\n          month = popupSource.month.num;\n          return scope.popup.refreshSelectedData(isStartPopup, month, year);\n        },\n        isLastYear: function(isStartPopup) {\n          var popupSource;\n          popupSource = getSource(isStartPopup);\n          if (!popupSource || !popupSource) {\n            return;\n          }\n          return popupSource.year.isEnd;\n        },\n        isSelectedDay: function(isStartPopup, date) {\n          if (isStartPopup) {\n            if (!scope.data.startResult || !scope.data.startResult.day) {\n              return;\n            }\n            return (date.day === scope.data.startResult.day) && (date.month === scope.data.startResult.month) && (date.year === scope.data.startResult.year);\n          } else {\n            if (!scope.data.endResult || !scope.data.endResult.day) {\n              return;\n            }\n            return (date.day === scope.data.endResult.day) && (date.month === scope.data.endResult.month) && (date.year === scope.data.endResult.year);\n          }\n        },\n        getTodayDateTime: function() {\n          var today;\n          if (!scope.popupSettings || !scope.popupSettings.today) {\n            return;\n          }\n          today = scope.popupSettings.today;\n          return new Date(today.year, today.month - 1, today.day).getTime();\n        },\n        isDayInSelectedMonth: function(isStartPopup, date) {\n          var popupSource;\n          popupSource = getSource(isStartPopup);\n          return (date.month === popupSource.month.num) && (date.year === popupSource.year.num);\n        },\n        goToYear: function(isStartPopup) {\n          var month, popupSource, year;\n          popupSource = getSource(isStartPopup);\n          year = popupSource.year.num;\n          month = popupSource.month.num;\n          return scope.popup.refreshSelectedData(isStartPopup, month, year);\n        },\n        refreshSelectedData: function(isStartPopup, month, year) {\n          if (isStartPopup) {\n            return scope.popupStartRefresh({\n              m: month,\n              y: year\n            });\n          } else {\n            return scope.popupEndRefresh({\n              m: month,\n              y: year\n            });\n          }\n        },\n        selectRangedDate: function() {\n          scope.popupResult = {\n            start: scope.data.startResult,\n            end: scope.data.endResult\n          };\n          if (scope.popupClick) {\n            scope.popupClick({\n              start: scope.data.startResult,\n              end: scope.data.endResult\n            });\n          }\n          return scope.popup.hidePopup();\n        }\n      };\n      return (function() {\n        return scope.watchers.result.watchPopupResult();\n      })();\n    }\n  };\n});\n\nangular.module(\"bdate.templates\", []).run([\"$templateCache\", function($templateCache) {$templateCache.put(\"bdate.html\",\"<div ng-class=\\\"{b_datepicker_in_progress: !isSourceReady}\\\" class=\\\"b_datepicker_root {{::bRootClasses}}\\\"><input type=text ng-model=bModel placeholder={{placeholder}} ng-click=popup.togglePopup() ng-disabled=!isSourceReady aria-label=\\\"Toggle date popup\\\" readonly=readonly class=\\\"b_datepicker_input {{::bInputClasses}}\\\"><button type=button ng-click=clear() ng-keydown=clear() aria-label=\\\"Clear Date\\\" class=\\\"b_clear_btn {{::bButtonClasses}}\\\">&times;</button><button type=button ng-click=popup.togglePopup() ng-keydown=popup.togglePopup() ng-disabled=!isSourceReady aria-label=\\\"Toggle date popup\\\" class=\\\"b_datepicker_button b_calendar_btn {{::bButtonClasses}}\\\">&nbsp;</button><bdate-popup popup-settings=bSettings popup-state=popup.state popup-source=bSource popup-result=popup.result popup-click=bOnSelectWrap(date) popup-refresh=\\\"bRefreshWrap(m, y)\\\" ng-if=!bRange class={{::bPopupClasses}}></bdate-popup><bdate-range-popup popup-settings=bSettings popup-state=popup.state popup-start-source=bStartSource popup-end-source=bEndSource popup-result=popup.result popup-click=\\\"bOnSelectRangeWrap(start, end)\\\" popup-start-refresh=\\\"bStartRefreshWrap(m, y)\\\" popup-end-refresh=\\\"bEndRefreshWrap(m, y)\\\" ng-if=bRange class={{::bPopupClasses}}></bdate-range-popup></div>\");\n$templateCache.put(\"popup.html\",\"<div ng-show=popupState.isOpen aria-label=\\\"Select date popup\\\" class=b_popup><div aria-label=\\\"Popup navigation\\\" class=b_popup_controls><div class=b_btn_prev_container><button type=button ng-click=popup.goPrevYear() aria-label=\\\"Select preview year\\\" ng-disabled=popup.isFirstYear() class=\\\"b_popup_btn b_btn_prev\\\">&#9664; &#9664;</button><button type=button ng-click=popup.goPrevMonth() aria-label=\\\"Select preview month\\\" ng-disabled=\\\"popup.isFirstMonth() &amp;&amp; popup.isFirstYear()\\\" class=\\\"b_popup_btn b_btn_prev\\\">&#9664;</button></div><div ng-bind=popupSource.month.name class=b_popup_month></div>&nbsp;<select ng-model=popupSource.year.num ng-options=\\\"year for year in popupSource.years\\\" ng-init=\\\"year = popupSource.year.num\\\" aria-label=\\\"Select year from list\\\" ng-change=popup.goToYear() class=b_popup_year></select><div class=b_btn_next_container><button type=button ng-click=popup.goNextMonth() aria-label=\\\"Select next month\\\" ng-disabled=\\\"popup.isLastMonth() &amp;&amp; popup.isLastYear()\\\" class=\\\"b_popup_btn b_btn_next\\\">&#9654;</button><button type=button ng-click=popup.goNextYear() aria-label=\\\"Select next year\\\" ng-disabled=popup.isLastYear() class=\\\"b_popup_btn b_btn_next\\\">&#9654; &#9654;</button></div></div><table aria-label=\\\"Days of selected month\\\" class=b_popup_days><tr><td ng-repeat=\\\"dayOfWeek in ::popupSettings.week\\\" aria-label=\\\"Days of week\\\" class=b_popup_day_of_week><span ng-bind=::dayOfWeek></span></td></tr></table><table class=b_popup_weeks><tr aria-label=\\\"Days of month\\\" class=b_popup_week><td ng-repeat=\\\"date in popupSource.dates track by $index\\\" ng-class=\\\"{b_popup_today_day_container: date.isToday}\\\" class=b_popup_day><button type=button ng-bind=date.day ng-click=popup.selectDate(date) ng-disabled=date.isDisabled aria-label={{date.day}}-{{date.month}}-{{date.year}} ng-class=\\\"{b_popup_day_in_selected_month: popup.isDayInSelectedMonth(date), b_popup_today_day: date.isToday, b_popup_selected_day: popup.isSelectedDay(date)}\\\" class=b_popup_day_btn></button></td></tr></table><div ng-show=popupSettings.today aria-label=\\\"Select today\\\" class=b_popup_today><button type=button ng-bind=\\\"popup.getTodayDateTime() | date:popupSettings.format\\\" ng-click=popup.selectDate(popupSettings.today) class=b_popup_today_btn></button></div></div>\");\n$templateCache.put(\"range-popup.html\",\"<div ng-show=popupState.isOpen aria-label=\\\"Select dates range popup\\\" class=b_range_popup_back><div class=\\\"b_popup b_range_popup b_range_popup_start\\\"><div aria-label=\\\"Popup navigation\\\" class=b_popup_controls><div class=b_btn_prev_container><button type=button ng-click=popup.goPrevYear(true) aria-label=\\\"Select preview year\\\" ng-disabled=popup.isFirstYear(true) class=\\\"b_popup_btn b_btn_prev\\\">&#9664; &#9664;</button><button type=button ng-click=popup.goPrevMonth(true) aria-label=\\\"Select preview month\\\" ng-disabled=\\\"popup.isFirstMonth(true) &amp;&amp; popup.isFirstYear(true)\\\" class=\\\"b_popup_btn b_btn_prev\\\">&#9664;</button></div><div ng-bind=popupStartSource.month.name class=b_popup_month></div>&nbsp;<select ng-model=popupStartSource.year.num ng-options=\\\"year for year in popupStartSource.years\\\" ng-init=\\\"year = popupStartSource.year.num\\\" aria-label=\\\"Select year from list\\\" ng-change=popup.goToYear(true) class=b_popup_year></select><div class=b_btn_next_container><button type=button ng-click=popup.goNextMonth(true) aria-label=\\\"Select next month\\\" ng-disabled=\\\"popup.isLastMonth(true) &amp;&amp; popup.isLastYear(true)\\\" class=\\\"b_popup_btn b_btn_next\\\">&#9654;</button><button type=button ng-click=popup.goNextYear(true) aria-label=\\\"Select next year\\\" ng-disabled=popup.isLastYear(true) class=\\\"b_popup_btn b_btn_next\\\">&#9654; &#9654;</button></div></div><table aria-label=\\\"Days of selected month\\\" class=b_popup_days><tr><td ng-repeat=\\\"dayOfWeek in ::popupSettings.week\\\" class=b_popup_day_of_week><span ng-bind=::dayOfWeek></span></td></tr></table><table class=b_popup_weeks><tr aria-label=\\\"Days of month\\\" class=b_popup_week><td ng-repeat=\\\"date in popupStartSource.dates track by $index\\\" ng-class=\\\"{b_popup_today_day_container: date.isToday}\\\" class=b_popup_day><button type=button ng-bind=date.day ng-click=\\\"popup.selectDate(true, date)\\\" ng-disabled=date.isDisabled aria-label={{date.day}}-{{date.month}}-{{date.year}} ng-class=\\\"{b_popup_day_in_selected_month: popup.isDayInSelectedMonth(true, date), b_popup_today_day: date.isToday, b_popup_selected_day: popup.isSelectedDay(true, date)}\\\" class=b_popup_day_btn></button></td></tr></table><div ng-show=popupSettings.today aria-label=\\\"Select today\\\" class=b_popup_today><button type=button ng-click=\\\"popup.selectDate(true, popupSettings.today)\\\" ng-bind=\\\"popup.getTodayDateTime() | date:popupSettings.format\\\" class=b_popup_today_btn></button></div></div><div class=\\\"b_popup b_range_popup b_range_popup_end\\\"><div aria-label=\\\"Popup navigation\\\" class=b_popup_controls><div class=b_btn_prev_container><button type=button ng-click=popup.goPrevYear(false) aria-label=\\\"Select preview year\\\" ng-disabled=popup.isFirstYear(false) class=\\\"b_popup_btn b_btn_prev\\\">&#9664; &#9664;</button><button type=button ng-click=popup.goPrevMonth(false) aria-label=\\\"Select preview month\\\" ng-disabled=\\\"popup.isFirstMonth(false) &amp;&amp; popup.isFirstYear(false)\\\" class=\\\"b_popup_btn b_btn_prev\\\">&#9664;</button></div><div ng-bind=popupEndSource.month.name class=b_popup_month></div>&nbsp;<select ng-model=popupEndSource.year.num ng-options=\\\"year for year in popupEndSource.years\\\" ng-init=\\\"year = popupEndSource.year.num\\\" aria-label=\\\"Select year from list\\\" ng-change=popup.goToYear(false) class=b_popup_year></select><div class=b_btn_next_container><button type=button ng-click=popup.goNextMonth(false) aria-label=\\\"Select next month\\\" ng-disabled=\\\"popup.isLastMonth(false) &amp;&amp; popup.isLastYear(false)\\\" class=\\\"b_popup_btn b_btn_next\\\">&#9654;</button><button type=button ng-click=popup.goNextYear(false) aria-label=\\\"Select next year\\\" ng-disabled=popup.isLastYear(false) class=\\\"b_popup_btn b_btn_next\\\">&#9654; &#9654;</button></div></div><table aria-label=\\\"Days of selected month\\\" class=b_popup_days><tr><td ng-repeat=\\\"dayOfWeek in ::popupSettings.week\\\" class=b_popup_day_of_week><span ng-bind=::dayOfWeek></span></td></tr></table><table class=b_popup_weeks><tr aria-label=\\\"Days of month\\\" class=b_popup_week><td ng-repeat=\\\"date in popupEndSource.dates track by $index\\\" ng-class=\\\"{b_popup_today_day_container: date.isToday}\\\" class=b_popup_day><button type=button ng-bind=date.day ng-click=\\\"popup.selectDate(false, date)\\\" ng-disabled=date.isDisabled aria-label={{date.day}}-{{date.month}}-{{date.year}} ng-class=\\\"{b_popup_day_in_selected_month: popup.isDayInSelectedMonth(false, date), b_popup_today_day: date.isToday, b_popup_selected_day: popup.isSelectedDay(false, date)}\\\" class=b_popup_day_btn></button></td></tr></table><div ng-show=popupSettings.today aria-label=\\\"Select today\\\" class=b_popup_today><button type=button ng-click=\\\"popup.selectDate(false, popupSettings.today)\\\" ng-bind=\\\"popup.getTodayDateTime() | date:popupSettings.format\\\" class=b_popup_today_btn></button></div></div><button type=button ng-disabled=\\\"!data.startResult || !data.endResult\\\" ng-click=popup.selectRangedDate() class=ok_btn>Ok</button></div>\");}]);"],"sourceRoot":"/source/"}