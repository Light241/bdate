{"version":3,"sources":["bdate.js"],"names":["angular","module","directive","$filter","bDataFactory","$document","$interval","restrict","replace","templateUrl","scope","bModel","bSource","bRootId","bInputId","bPopupId","controller","$scope","$watch","setData","link","elem","processClick","date","viewed","model","dateTime","formattedDate","equals","Date","year","month","day","getTime","data","format","event","clickedElem","isOpen","isOutsideClick","popupElem","popup","state","target","contains","$apply","hidePopup","on","togglePopup","factory","exports","isDataReady","source","constant","invalidParams","errorOnChangeMonthOrYear","bDateUtils","MESSAGES","popupState","dateModel","selectDate","setDateModel","console","error","setFormat","viewedDate","setViewedDate","yearNum","monthNum","dayNum","first","Object","keys","years","last","length","number","count","daysTotal","days_total","startDay","start_day","name","getMonthName","days","getDaysArr","daysOfWeek","get","getShorts","getDaysOfWeekShorts","today","setToday","_getPrevMonthTailDaysArr","i","isPrevMonthExist","prevMonthDate","prevMonthDaysCount","result","sourceCheckers","getPrevMonthObj","getDate","unshift","isOtherMonth","_getNextMonthTailDaysArr","daysCount","daysArr","daysInWeek","expectedWeeksCount","isNextMonthExist","nextMonthDate","Math","ceil","floor","getNextMonthObj","push","_getMonthDaysArr","_markToday","isToday","currentMonthDaysArr","nextMonthTailDaysArr","prevMonthTailDaysArr","concat","goNextMonth","isForward","nextObj","getNextAvailableMonth","goNextYear","getNextAvailableYear","init","dateSource","firstYear","isMonthExist","getFirstYear","getFirstMonth","daysOfWeekList","monthObj","short",1,2,3,4,5,6,7,8,9,10,11,12,"makeDateModel","datetime","getUTCDate","getMonth","getFullYear","curMonthNum","isFirstMonth","isFirstYear","lastMonthOfPrevYearNum","prevMonthNum","prevYearNum","getLastMonth","firstMonthOfNextYearNum","isLastMonth","isLastYear","nextMonthNum","nextYearNum","isYearExist","getYear","getLastYear","run","$templateCache","put"],"mappings":"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","file":"bdate.min.js","sourcesContent":["angular.module('bdate.datepicker', ['bdate.popup', 'bdate.data', 'bdate.templates']).directive('bdatepicker', ['$filter', 'bDataFactory', '$document', '$interval', function($filter, bDataFactory, $document, $interval) {\n  return {\n    restrict: 'E',\n    replace: true,\n    templateUrl: 'bdate.html',\n    scope: {\n      bModel: '=',\n      bSource: '=',\n      bRootId: '@?',\n      bInputId: '@?',\n      bPopupId: '@?'\n    },\n    controller: ['$scope', function($scope) {\n      return scope.$watch('date.model', function() {\n        return bDataFactory.setData($scope.bSource);\n      });\n    }],\n    link: function(scope, elem) {\n      var processClick;\n      scope.date = {\n        viewed: '',\n        model: {}\n      };\n      scope.$watch('date.model', function() {\n        var dateTime, formattedDate;\n        if (angular.equals({}, scope.date.model)) {\n          return;\n        }\n        dateTime = new Date(scope.date.model.year, scope.date.model.month - 1, scope.date.model.day).getTime();\n        formattedDate = $filter('date')(dateTime, bDataFactory.data.format);\n        scope.date.viewed = formattedDate;\n        return scope.bModel = scope.date.viewed;\n      });\n      processClick = function(event) {\n        var clickedElem, isOpen, isOutsideClick, popupElem;\n        isOpen = scope.popup.state.isOpen;\n        clickedElem = event.target;\n        popupElem = elem;\n        isOutsideClick = (popupElem !== clickedElem) && !(popupElem[0].contains(clickedElem));\n        if (isOpen && isOutsideClick) {\n          return scope.$apply(function() {\n            return scope.popup.hidePopup();\n          });\n        }\n      };\n      $document.on('click', processClick);\n      return scope.popup = {\n        state: {\n          isOpen: false\n        },\n        togglePopup: function() {\n          return scope.popup.state.isOpen = !scope.popup.state.isOpen;\n        },\n        hidePopup: function() {\n          return scope.popup.state.isOpen = false;\n        }\n      };\n    }\n  };\n}]);\n\nangular.module('bdate.data', []).factory('bDataFactory', function() {\n  var exports;\n  return exports = {\n    data: null,\n    isDataReady: function() {\n      return !!exports.data;\n    },\n    setData: function(source) {\n      return exports.data = source;\n    }\n  };\n});\n\nangular.module('bdate', ['bdate.datepicker']).constant('MESSAGES', {\n  invalidParams: 'Invalid params',\n  errorOnChangeMonthOrYear: 'cannot change month or year'\n});\n\nangular.module('bdate.popup', ['bdate.utils', 'bdate.data', 'bdate.templates']).directive('bdatePopup', ['bDateUtils', 'bDataFactory', 'MESSAGES', function(bDateUtils, bDataFactory, MESSAGES) {\n  return {\n    restrict: 'E',\n    replace: true,\n    templateUrl: 'popup.html',\n    scope: {\n      popupState: '=',\n      dateModel: '='\n    },\n    link: function(scope) {\n      scope.popup = {\n        hidePopup: function() {\n          return scope.popupState.isOpen = false;\n        },\n        selectDate: function(date) {\n          scope.data.setDateModel(date);\n          return scope.popup.hidePopup();\n        }\n      };\n      scope.data = {\n        setDateModel: function(dateModel) {\n          if (!dateModel) {\n            return console.error(MESSAGES.invalidParams);\n          }\n          return scope.dateModel = dateModel;\n        },\n        format: null,\n        setFormat: function(format) {\n          if (!format) {\n            return console.error(MESSAGES.invalidParams);\n          }\n          return scope.data.format = format;\n        },\n        viewedDate: null,\n        setViewedDate: function(yearNum, monthNum, dayNum) {\n          if (!yearNum || !monthNum) {\n            return console.error(MESSAGES.invalidParams);\n          }\n          yearNum = +yearNum;\n          monthNum = +monthNum;\n          scope.data.viewedDate = {\n            year: {\n              first: Object.keys(bDataFactory.data.years)[0],\n              last: Object.keys(bDataFactory.data.years)[Object.keys(bDataFactory.data.years).length - 1],\n              number: yearNum,\n              count: Object.keys(bDataFactory.data.years).length\n            },\n            month: {\n              first: Object.keys(bDataFactory.data.years[yearNum])[0],\n              last: Object.keys(bDataFactory.data.years[yearNum])[Object.keys(bDataFactory.data.years[yearNum]).length - 1],\n              daysTotal: bDataFactory.data.years[yearNum][monthNum].days_total,\n              startDay: bDataFactory.data.years[yearNum][monthNum].start_day,\n              number: monthNum,\n              name: bDateUtils.getMonthName(monthNum),\n              count: Object.keys(bDataFactory.data.years[yearNum]).length\n            },\n            day: {\n              number: dayNum\n            }\n          };\n          return scope.data.viewedDate.days = scope.data.getDaysArr(scope.data.viewedDate.year, scope.data.viewedDate.month);\n        },\n        daysOfWeek: {\n          get: function() {\n            return bDateUtils.daysOfWeek;\n          },\n          getShorts: function() {\n            return bDateUtils.getDaysOfWeekShorts();\n          }\n        },\n        today: null,\n        setToday: function(today) {\n          if (!today) {\n            return console.error(MESSAGES.invalidParams);\n          }\n          return scope.data.today = today;\n        },\n        _getPrevMonthTailDaysArr: function(yearNum, monthNum, startDay) {\n          var i, isPrevMonthExist, prevMonthDate, prevMonthDaysCount, result;\n          result = [];\n          prevMonthDate = {\n            day: null,\n            month: null,\n            year: null\n          };\n          isPrevMonthExist = bDateUtils.sourceCheckers.month.isPrevMonthExist(yearNum, monthNum);\n          prevMonthDaysCount = 0;\n          if (isPrevMonthExist) {\n            prevMonthDate = bDateUtils.sourceCheckers.month.getPrevMonthObj(yearNum, monthNum);\n            prevMonthDaysCount = new Date(prevMonthDate.year, prevMonthDate.month, 0).getDate();\n          }\n          i = 0;\n          while (i < startDay - 1) {\n            result.unshift({\n              day: prevMonthDaysCount - i,\n              month: prevMonthDate.month,\n              year: prevMonthDate.year,\n              isOtherMonth: true\n            });\n            i++;\n          }\n          return result;\n        },\n        _getNextMonthTailDaysArr: function(yearNum, monthNum, startDay, daysCount, daysArr) {\n          var daysInWeek, expectedWeeksCount, i, isNextMonthExist, nextMonthDate, result;\n          result = [];\n          daysInWeek = 7;\n          expectedWeeksCount = Math.ceil(daysArr.length / daysInWeek);\n          if ((daysArr.length / daysInWeek) === Math.floor(daysArr.length / daysInWeek)) {\n            return result;\n          }\n          nextMonthDate = {\n            day: null,\n            month: null,\n            year: null\n          };\n          isNextMonthExist = bDateUtils.sourceCheckers.month.isNextMonthExist(yearNum, monthNum);\n          if (isNextMonthExist) {\n            nextMonthDate = bDateUtils.sourceCheckers.month.getNextMonthObj(yearNum, monthNum);\n          }\n          i = daysArr.length;\n          while (i < (expectedWeeksCount * daysInWeek)) {\n            daysArr.push({\n              day: i - (daysCount + startDay - 2),\n              month: nextMonthDate.month,\n              year: nextMonthDate.year,\n              isOtherMonth: true\n            });\n            i++;\n          }\n          return result;\n        },\n        _getMonthDaysArr: function(yearNum, monthNum, daysCount) {\n          var i, result;\n          result = [];\n          i = 1;\n          while (i <= daysCount) {\n            result.push({\n              day: i,\n              month: monthNum,\n              year: yearNum\n            });\n            i++;\n          }\n          return result;\n        },\n        _markToday: function(daysArr) {\n          var i;\n          i = 1;\n          while (i < daysArr.length) {\n            if (daysArr[i].day === scope.data.today.day) {\n              daysArr[i].isToday = true;\n            }\n            i++;\n          }\n          return daysArr;\n        },\n        getDaysArr: function(year, month) {\n          var currentMonthDaysArr, daysCount, nextMonthTailDaysArr, prevMonthTailDaysArr, result, startDay;\n          daysCount = +month.daysTotal;\n          startDay = +month.startDay;\n          prevMonthTailDaysArr = scope.data._getPrevMonthTailDaysArr(year.number, month.number, startDay);\n          currentMonthDaysArr = scope.data._getMonthDaysArr(year.number, month.number, daysCount);\n          if (year.number === scope.data.today.year && month.number === scope.data.today.month) {\n            currentMonthDaysArr = scope.data._markToday(currentMonthDaysArr);\n          }\n          result = prevMonthTailDaysArr.concat(currentMonthDaysArr);\n          nextMonthTailDaysArr = scope.data._getNextMonthTailDaysArr(year.number, month.number, startDay, daysCount, result);\n          result = result.concat(nextMonthTailDaysArr);\n          return result;\n        },\n        goNextMonth: function(isForward) {\n          var nextObj;\n          nextObj = bDateUtils.sourceCheckers.month.getNextAvailableMonth(isForward, scope.data.viewedDate.year.number, scope.data.viewedDate.month.number);\n          if (nextObj) {\n            return scope.data.setViewedDate(nextObj.year, nextObj.month);\n          }\n        },\n        goNextYear: function(isForward) {\n          var nextObj;\n          nextObj = bDateUtils.sourceCheckers.year.getNextAvailableYear(isForward, scope.data.viewedDate.year.number, scope.data.viewedDate.month.number);\n          if (nextObj) {\n            return scope.data.setViewedDate(nextObj.year, nextObj.month);\n          }\n        },\n        init: function(dateSource) {\n          var firstYear;\n          scope.data.setFormat(dateSource.format);\n          scope.data.setToday(dateSource.today);\n          if (scope.dateModel && !angular.equals({}, scope.dateModel)) {\n            return scope.data.setViewedDate(scope.dateModel.year, scope.dateModel.month, scope.dateModel.day);\n          } else if (bDateUtils.sourceCheckers.month.isMonthExist(dateSource.today.year, dateSource.today.month)) {\n            return scope.data.setViewedDate(dateSource.today.year, dateSource.today.month);\n          } else {\n            firstYear = bDateUtils.sourceCheckers.year.getFirstYear();\n            return scope.data.setViewedDate(firstYear, bDateUtils.sourceCheckers.month.getFirstMonth(firstYear));\n          }\n        }\n      };\n      (function() {\n        scope.data.init(bDataFactory.data);\n        return scope.bDateUtils = bDateUtils;\n      })();\n      return scope.$watch('popupState.isOpen', function() {\n        if (scope.popupState.isOpen && (scope.dateModel && !angular.equals({}, scope.dateModel))) {\n          scope.data.setDateModel(scope.dateModel);\n          return scope.data.setViewedDate(scope.dateModel.year, scope.dateModel.month, scope.dateModel.day);\n        }\n      });\n    }\n  };\n}]);\n\nangular.module('bdate.utils', ['bdate.data']).factory('bDateUtils', ['MESSAGES', 'bDataFactory', function(MESSAGES, bDataFactory) {\n  var daysOfWeekList, exports, monthObj;\n  daysOfWeekList = [\n    {\n      name: 'Понедельник',\n      short: 'Пн'\n    }, {\n      name: 'Вторник',\n      short: 'Вт'\n    }, {\n      name: 'Среда',\n      short: 'Ср'\n    }, {\n      name: 'Четверг',\n      short: 'Чт'\n    }, {\n      name: 'Пятница',\n      short: 'Пт'\n    }, {\n      name: 'Суббота',\n      short: 'Сб'\n    }, {\n      name: 'Воскресенье',\n      short: 'Вс'\n    }\n  ];\n  monthObj = {\n    1: {\n      name: 'Январь',\n      short: 'Янв'\n    },\n    2: {\n      name: 'Февраль',\n      short: 'Фев'\n    },\n    3: {\n      name: 'Март',\n      short: 'Март'\n    },\n    4: {\n      name: 'Апрель',\n      short: 'Май'\n    },\n    5: {\n      name: 'Май',\n      short: 'Май'\n    },\n    6: {\n      name: 'Июнь',\n      short: 'Июнь'\n    },\n    7: {\n      name: 'Июль',\n      short: 'Июль'\n    },\n    8: {\n      name: 'Август',\n      short: 'Авг'\n    },\n    9: {\n      name: 'Сентябрь',\n      short: 'Сент'\n    },\n    10: {\n      name: 'Октябрь',\n      short: 'Окт'\n    },\n    11: {\n      name: 'Ноябрь',\n      short: 'Ноя'\n    },\n    12: {\n      name: 'Декабрь',\n      short: 'Дек'\n    }\n  };\n  return exports = {\n    daysOfWeek: daysOfWeekList,\n    month: monthObj,\n    getDaysOfWeekShorts: function() {\n      var i, result;\n      i = 0;\n      result = [];\n      while (i < daysOfWeekList.length) {\n        result.push(daysOfWeekList[i].short);\n        i++;\n      }\n      return result;\n    },\n    getMonthName: function(number) {\n      return monthObj[number].name;\n    },\n    makeDateModel: function(datetime) {\n      var date, day, year;\n      date = new Date(datetime);\n      day = date.getUTCDate();\n      monthObj = date.getMonth() + 1;\n      year = date.getFullYear();\n      return {\n        day: day,\n        month: monthObj,\n        year: year\n      };\n    },\n    sourceCheckers: {\n      month: {\n        isMonthExist: function(yearNum, monthNum) {\n          if (!yearNum || !monthNum) {\n            return console.error(MESSAGES.invalidParams);\n          }\n          yearNum = +yearNum;\n          monthNum = +monthNum;\n          if (!bDataFactory.data.years[yearNum]) {\n            return false;\n          }\n          return !!bDataFactory.data.years[yearNum][monthNum];\n        },\n        isPrevMonthExist: function(yearNum, curMonthNum) {\n          var isFirstMonth, isFirstYear, lastMonthOfPrevYearNum, prevMonthNum, prevYearNum;\n          if (!yearNum || !curMonthNum) {\n            return console.error(MESSAGES.invalidParams);\n          }\n          yearNum = +yearNum;\n          curMonthNum = +curMonthNum;\n          if (!exports.sourceCheckers.month.isMonthExist(yearNum, curMonthNum)) {\n            return false;\n          }\n          isFirstMonth = exports.sourceCheckers.month.isFirstMonth(yearNum, curMonthNum);\n          if (!isFirstMonth) {\n            prevMonthNum = curMonthNum - 1;\n            return exports.sourceCheckers.month.isMonthExist(yearNum, prevMonthNum);\n          } else {\n            isFirstYear = exports.sourceCheckers.year.isFirstYear(yearNum);\n            if (!isFirstYear) {\n              prevYearNum = yearNum - 1;\n              lastMonthOfPrevYearNum = exports.sourceCheckers.month.getLastMonth(prevYearNum);\n              return exports.sourceCheckers.month.isMonthExist(prevYearNum, lastMonthOfPrevYearNum);\n            } else {\n              return false;\n            }\n          }\n        },\n        getPrevMonthObj: function(yearNum, curMonthNum) {\n          var isFirstMonth, isFirstYear, lastMonthOfPrevYearNum, prevMonthNum, prevYearNum;\n          if (!yearNum || !curMonthNum) {\n            return console.error(MESSAGES.invalidParams);\n          }\n          yearNum = +yearNum;\n          curMonthNum = +curMonthNum;\n          isFirstMonth = exports.sourceCheckers.month.isFirstMonth(yearNum, curMonthNum);\n          if (!isFirstMonth) {\n            prevMonthNum = curMonthNum - 1;\n            if (exports.sourceCheckers.month.isMonthExist(yearNum, prevMonthNum)) {\n              return {\n                year: yearNum,\n                month: prevMonthNum\n              };\n            } else {\n              return null;\n            }\n          } else {\n            isFirstYear = exports.sourceCheckers.year.isFirstYear(yearNum);\n            if (!isFirstYear) {\n              prevYearNum = yearNum - 1;\n              lastMonthOfPrevYearNum = exports.sourceCheckers.month.getLastMonth(prevYearNum);\n              if (exports.sourceCheckers.month.isMonthExist(prevYearNum, lastMonthOfPrevYearNum)) {\n                return {\n                  year: prevYearNum,\n                  month: lastMonthOfPrevYearNum\n                };\n              } else {\n                return null;\n              }\n            } else {\n              return null;\n            }\n          }\n        },\n        isNextMonthExist: function(yearNum, curMonthNum) {\n          var firstMonthOfNextYearNum, isLastMonth, isLastYear, nextMonthNum, nextYearNum;\n          if (!yearNum || !curMonthNum) {\n            return console.error(MESSAGES.invalidParams);\n          }\n          yearNum = +yearNum;\n          curMonthNum = +curMonthNum;\n          if (!exports.sourceCheckers.month.isMonthExist(yearNum, curMonthNum)) {\n            return false;\n          }\n          isLastMonth = exports.sourceCheckers.month.isLastMonth(yearNum, curMonthNum);\n          if (!isLastMonth) {\n            nextMonthNum = curMonthNum + 1;\n            return exports.sourceCheckers.month.isMonthExist(yearNum, nextMonthNum);\n          } else {\n            isLastYear = exports.sourceCheckers.year.isLastYear(yearNum);\n            if (!isLastYear) {\n              nextYearNum = yearNum + 1;\n              firstMonthOfNextYearNum = exports.sourceCheckers.month.getFirstMonth(nextYearNum);\n              return exports.sourceCheckers.month.isMonthExist(nextYearNum, firstMonthOfNextYearNum);\n            } else {\n              return false;\n            }\n          }\n        },\n        getNextMonthObj: function(yearNum, curMonthNum) {\n          var firstMonthOfNextYearNum, isLastMonth, isLastYear, nextMonthNum, nextYearNum;\n          if (!yearNum || !curMonthNum) {\n            return console.error(MESSAGES.invalidParams);\n          }\n          yearNum = +yearNum;\n          curMonthNum = +curMonthNum;\n          isLastMonth = exports.sourceCheckers.month.isLastMonth(yearNum, curMonthNum);\n          if (!isLastMonth) {\n            nextMonthNum = curMonthNum + 1;\n            if (exports.sourceCheckers.month.isMonthExist(yearNum, nextMonthNum)) {\n              return {\n                year: yearNum,\n                month: nextMonthNum\n              };\n            } else {\n              return null;\n            }\n          } else {\n            isLastYear = exports.sourceCheckers.year.isLastYear(yearNum);\n            if (!isLastYear) {\n              nextYearNum = yearNum + 1;\n              firstMonthOfNextYearNum = exports.sourceCheckers.month.getFirstMonth(nextYearNum);\n              if (exports.sourceCheckers.month.isMonthExist(nextYearNum, firstMonthOfNextYearNum)) {\n                return {\n                  year: nextYearNum,\n                  month: firstMonthOfNextYearNum\n                };\n              } else {\n                return null;\n              }\n            } else {\n              return null;\n            }\n          }\n        },\n        getMonth: function(yearNum, monthNum) {\n          if (!yearNum || !monthNum) {\n            return console.error(MESSAGES.invalidParams);\n          }\n          return bDataFactory.data.years[yearNum][monthNum];\n        },\n        isFirstMonth: function(yearNum, monthNum) {\n          yearNum = +yearNum;\n          monthNum = +monthNum;\n          return monthNum === +Object.keys(bDataFactory.data.years[yearNum])[0];\n        },\n        getFirstMonth: function(yearNum) {\n          yearNum = +yearNum;\n          return +Object.keys(bDataFactory.data.years[yearNum])[0];\n        },\n        isLastMonth: function(yearNum, monthNum) {\n          yearNum = +yearNum;\n          monthNum = +monthNum;\n          return monthNum === +Object.keys(bDataFactory.data.years[yearNum])[Object.keys(bDataFactory.data.years[yearNum]).length - 1];\n        },\n        getLastMonth: function(yearNum) {\n          yearNum = +yearNum;\n          return +Object.keys(bDataFactory.data.years[yearNum])[Object.keys(bDataFactory.data.years[yearNum]).length - 1];\n        },\n        getNextAvailableMonth: function(isForward, yearNum, monthNum) {\n          var isFirstMonth, isLastMonth, nextMonthNum, nextYearNum, result;\n          yearNum = +yearNum;\n          monthNum = +monthNum;\n          isFirstMonth = exports.sourceCheckers.month.isFirstMonth(yearNum, monthNum);\n          isLastMonth = exports.sourceCheckers.month.isLastMonth(yearNum, monthNum);\n          nextYearNum = yearNum;\n          nextMonthNum = monthNum;\n          if (isForward) {\n            if (!isLastMonth) {\n              nextMonthNum = monthNum + 1;\n            } else {\n              nextYearNum = yearNum + 1;\n              if (exports.sourceCheckers.year.isYearExist(nextYearNum)) {\n                nextMonthNum = exports.sourceCheckers.month.getFirstMonth(nextYearNum);\n              } else {\n                console.error(MESSAGES.errorOnChangeMonthOrYear);\n                return false;\n              }\n            }\n          } else if (!isForward) {\n            if (!isFirstMonth) {\n              nextMonthNum = monthNum - 1;\n            } else {\n              nextYearNum = yearNum - 1;\n              if (exports.sourceCheckers.year.isYearExist(nextYearNum)) {\n                nextMonthNum = exports.sourceCheckers.month.getLastMonth(nextYearNum);\n              } else {\n                console.error(MESSAGES.errorOnChangeMonthOrYear);\n                return false;\n              }\n            }\n          }\n          return result = {\n            year: nextYearNum,\n            month: nextMonthNum\n          };\n        }\n      },\n      year: {\n        isYearExist: function(yearNum) {\n          if (!yearNum) {\n            return console.error(MESSAGES.invalidParams);\n          }\n          yearNum = +yearNum;\n          return !!bDataFactory.data.years[yearNum];\n        },\n        getYear: function(yearNum) {\n          if (!yearNum) {\n            return console.error(MESSAGES.invalidParams);\n          }\n          return bDataFactory.data.years[yearNum];\n        },\n        isFirstYear: function(yearNum) {\n          yearNum = +yearNum;\n          return yearNum === +Object.keys(bDataFactory.data.years)[0];\n        },\n        getFirstYear: function() {\n          return +Object.keys(bDataFactory.data.years)[0];\n        },\n        isLastYear: function(yearNum) {\n          yearNum = +yearNum;\n          return yearNum === +Object.keys(bDataFactory.data.years)[Object.keys(bDataFactory.data.years).length - 1];\n        },\n        getLastYear: function() {\n          return +Object.keys(bDataFactory.data.years)[Object.keys(bDataFactory.data.years).length - 1];\n        },\n        getNextAvailableYear: function(isForward, yearNum, monthNum) {\n          var isFirstYear, isLastYear, nextMonthNum, nextYearNum, result;\n          yearNum = +yearNum;\n          monthNum = +monthNum;\n          isFirstYear = exports.sourceCheckers.year.isFirstYear(yearNum);\n          isLastYear = exports.sourceCheckers.year.isLastYear(yearNum);\n          nextYearNum = yearNum;\n          nextMonthNum = monthNum;\n          if (isForward) {\n            if (!isLastYear) {\n              nextYearNum = yearNum + 1;\n              if (exports.sourceCheckers.month.isMonthExist(nextYearNum, monthNum)) {\n                nextMonthNum = monthNum;\n              } else {\n                nextMonthNum = exports.sourceCheckers.month.getFirstMonth(nextYearNum);\n              }\n            } else {\n              return false;\n            }\n          } else if (!isForward) {\n            if (!isFirstYear) {\n              nextYearNum = yearNum - 1;\n              if (exports.sourceCheckers.month.isMonthExist(nextYearNum, monthNum)) {\n                nextMonthNum = monthNum;\n              } else {\n                nextMonthNum = exports.sourceCheckers.month.getFirstMonth(nextYearNum);\n              }\n            } else {\n              return false;\n            }\n          }\n          return result = {\n            year: nextYearNum,\n            month: nextMonthNum\n          };\n        }\n      }\n    }\n  };\n}]);\n\nangular.module(\"bdate.templates\", []).run([\"$templateCache\", function($templateCache) {$templateCache.put(\"bdate.html\",\"<div id={{bRootId}} class=b_datepicker_root><input type=text id={{bInputId}} ng-model=date.viewed ng-click=popup.togglePopup() ng-class=\\\"{b_datepicker_in_progress: !isDataReady}\\\" readonly=readonly class=b_input><button type=button ng-click=popup.togglePopup() class=b_datepicker_button>H</button><bdate-popup id={{bPopupId}} popup-state=popup.state date-model=date.model></bdate-popup></div>\");\n$templateCache.put(\"popup.html\",\"<div ng-show=popupState.isOpen class=b_popup><div class=b_popup_controls><div class=b_btn_prev_container><button type=button ng-click=data.goNextYear(false) ng-disabled=\\\"!bDateUtils.sourceCheckers.year.isYearExist(data.viewedDate.year.number - 1)\\\" class=\\\"b_popup_btn b_btn_prev\\\"><<</button><button type=button ng-click=data.goNextMonth(false) ng-disabled=\\\"!bDateUtils.sourceCheckers.month.isPrevMonthExist(data.viewedDate.year.number, data.viewedDate.month.number)\\\" class=\\\"b_popup_btn b_btn_prev\\\"><</button></div><div ng-bind=data.viewedDate.month.name class=b_popup_month></div>&nbsp;<div ng-bind=data.viewedDate.year.number class=b_popup_year></div><div class=b_btn_next_container><button type=button ng-click=data.goNextMonth(true) ng-disabled=\\\"!bDateUtils.sourceCheckers.month.isNextMonthExist(data.viewedDate.year.number, data.viewedDate.month.number)\\\" class=\\\"b_popup_btn b_btn_next\\\">></button><button type=button ng-click=data.goNextYear(true) ng-disabled=\\\"!bDateUtils.sourceCheckers.year.isYearExist(data.viewedDate.year.number + 1)\\\" class=\\\"b_popup_btn b_btn_next\\\">>></button></div></div><table class=b_popup_days><tr><td ng-repeat=\\\"dayOfWeek in ::data.daysOfWeek.getShorts()\\\" class=b_popup_day_of_week><span ng-bind=::dayOfWeek></span></td></tr></table><table class=b_popup_weeks><tr class=b_popup_week><td ng-repeat=\\\"date in data.viewedDate.days track by $index\\\" class=b_popup_day><button type=button ng-bind=date.day ng-click=popup.selectDate(date) ng-class=\\\"{b_popup_cur_month_day: !date.isOtherMonth, b_popup_today_day: date.isToday, b_popup_selected_day: date.day == dateModel.day &amp;&amp; date.month == dateModel.month &amp;&amp; date.year == dateModel.year}\\\" class=b_popup_day_btn></button></td></tr></table><div class=b_popup_today>Сегодня<button type=button ng-bind=\\\"data.today.date | date:data.format\\\" ng-click=popup.selectDate(bDateUtils.makeDateModel(data.today.date)) class=b_popup_today_btn></button></div></div>\");}]);"],"sourceRoot":"/source/"}